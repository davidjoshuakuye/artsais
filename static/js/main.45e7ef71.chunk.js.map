{"version":3,"sources":["AppShell/AppShellStore.ts","utils/animation.ts","utils/array.ts","utils/audio.ts","utils/browser.ts","utils/system.ts","utils/file.ts","utils/loadable.ts","features/Camera/CameraStore.ts","features/User/UserStore.ts","features/SnapMap/data.ts","features/SnapMap/SnapMapStore.ts","features/Snap/SnapStore.ts","features/Chat/ChatStore.ts","utils/string.ts","components/Icon/Icon.tsx","components/Button/Button.tsx","components/Input/Input.tsx","components/Header/Header.tsx","AppShell/data.ts","AppShell/Toolbar/Toolbar.tsx","components/Section/Section.tsx","components/MenuItem/MenuItem.tsx","components/Loader/Loader.tsx","features/Account/Map/Map.tsx","features/Account/Logo.svg.tsx","features/Account/Account.tsx","components/Avatar/Avatar.tsx","components/UserCard/UserCard.tsx","components/Error/Error.tsx","features/Search/Search.tsx","features/SnapMap/Header/Header.tsx","features/SnapMap/SnapMap.tsx","features/Snap/Snap.tsx","utils/time.ts","features/Archive/Archive.tsx","features/Chat/data.ts","components/Pill/Pill.tsx","features/Chat/Chat.tsx","components/SkeletonFrame/SkeletonFrame.tsx","components/Card/Card.tsx","features/Discover/Discover.tsx","utils/viewport.ts","AppShell/Drawer/Drawer.tsx","AppShell/Footer/Footer.tsx","AppShell/AppShell.tsx","features/Camera/PhotoCapture/PhotoCapture.tsx","features/Camera/icons/Deform.svg.tsx","features/Camera/icons/Dog.svg.tsx","features/Camera/icons/Bees.svg.tsx","features/Camera/icons/Liberty.svg.tsx","features/Camera/icons/Halloween.svg.tsx","features/Camera/data.tsx","features/Camera/Camera.tsx","features/404/404.tsx","index.tsx"],"names":["appSlice","createSlice","name","initialState","drawers","footerType","reducers","showDrawer","reducer","state","action","drawer","payload","minusCurrentDrawer","filter","component","prepare","animationIn","animationOut","animationInDuration","animationOutDuration","theme","position","show","hideDrawer","map","hideAllDrawers","openDrawers","lastDrawerOpen","length","setFooterType","actions","onAnimationComplete","callback","setTimeout","randomArrayVal","arr","Math","floor","random","playSound","sound","audioElem","a","soundMap","newAppMessage","cameraShutter","src","play","navigator","language","userAgent","api","baseURL","get","endpoint","external","respond","post","options","put","patch","delete","method","data","url","headers","Headers","body","JSON","stringify","fetch","response","json","sleep","milliseconds","Promise","resolve","base64ToBlob","base64Url","res","blob","loadable","loading","error","cameraMode","photoTaken","photos","getPhotos","createAsyncThunk","cameraSlice","setPhoto","month","year","dataURL","images","unshift","time","Date","toLocaleString","getFullYear","toggleCameraMode","extraReducers","builder","addCase","pending","fulfilled","rejected","session","id","username","avatar","gender","age","fullName","geolocation","country","city","zip","latitude","longitude","friends","getSession","getFriends","getGeoLocation","country_name","postal","userSlice","setLatLon","abbrConditionMap","sn","sl","h","t","s","c","hr","lr","hc","lc","conditionIconMap","snow","sleet","hail","thunderstorm","showers","clear","getSnaps","lat","lon","coords","snaps","snap","index","location","getWeather","encodeURIComponent","weather","temperature","condition","whereOnEarthID","parse","contents","woeid","consolidated_weather","the_temp","weather_state_abbr","celsius","round","snapMapSlice","defaultSnap","type","caption","shareable","snapSlice","addSnap","removeSnap","thread","messages","getMessages","user","chatSlice","postMessage","author","message","push","replace","char","rand","toString","iconMap","faSnapchatSquare","faGithub","faCircle","faCamera","faUserPlus","faListAlt","faGrinBeam","faAngleRight","faCompass","faUserCircle","faSearch","faRetweet","faAngleDown","faLocationArrow","faSignal","faBatteryHalf","faCommentAlt","faMobile","faMobileAlt","faDot","faLaugh","faSmileWink","faEllipsisV","faEllipsisH","faCog","faTimesCircle","faTimes","faAngleLeft","faSearchPlus","faPaw","faSpider","faWater","faPhoneAlt","faVideo","faRocket","faMicrophone","faDownload","faTextHeight","faPen","faStickyNote","faCut","faPaperclip","faCropAlt","faStopwatch","faExternalLinkAlt","faPlayCircle","faEdit","faMagic","faQrcode","faSnowflake","faIcicles","faCloudMeatball","faPooStorm","faCloudShowersHeavy","faCloudRain","faCloud","faCloudSun","faSun","faExclamationCircle","Icon","libraryProps","icon","className","Button","image","svg","icons","iconClass","iconClasses","plain","purple","label","testId","nativeElemProps","data-test","classNames","alt","key","Input","leftIcon","rightIcon","onEnter","focus","spellCheck","animate","dark","inputElem","useRef","useState","full","setFull","useEffect","current","disabled","onClick","ref","onKeyPress","Header","insideDrawer","dispatch","useDispatch","useSelector","iconImage","placeholder","test","alert","atleastOneDrawerOpen","some","Toolbar","app","setTime","updateTime","toLocaleTimeString","hour","minute","setInterval","Section","header","transparent","children","MenuItem","straightEdge","Loader","fixed","nobg","Array","fill","val","apiKey","process","hasApiKey","mapboxgl","accessToken","Map","mapElem","setLoading","getUserLocation","loadMap","dummyResponse","getCurrentPosition","maximumAge","Infinity","timeout","enableHighAccuracy","container","style","center","zoom","interactive","on","tooltip","document","createElement","classList","add","Marker","setLngLat","addTo","role","aria-label","href","target","rel","Logo","xmlns","viewBox","stroke","strokeWidth","strokeLinecap","strokeLinejoin","strokeMiterlimit","d","currentDate","toLocaleDateString","day","Account","title","sizeMap","sm","md","lg","Avatar","size","width","UserCard","Error","Search","query","setQuery","pattern","RegExp","users","match","hasResults","value","onChange","e","currentTarget","isVisible","snapMap","SnapMap","setMap","addSelfMarkerToMap","flyTo","forEach","addSnapToMap","Popup","closeOnClick","setHTML","marker","setAttribute","addEventListener","preventDefault","elem","remove","Snap","videoElem","load","closeSnap","hasLocationTime","metadata","timestamp","elapsed","now","msPerMinute","msPerHour","msPerDay","relativeTime","playsInline","onEnded","Archive","camera","openPhoto","dummyMessages","Pill","Chat","chat","messageContainer","setMessage","typing","setTyping","botResponse","useLayoutEffect","scrollTop","scrollHeight","firstMsg","typeAndStop","i","prevTyping","submitMessage","other","onBlur","SkeletonFrame","count","Card","Discover","drawerContent","loadMore","isFetching","page","setPage","profiles","setProfiles","onScroll","loadPage","func","wait","args","later","clearTimeout","debounce","fullyVisible","getBoundingClientRect","elemTop","top","elemBottom","bottom","window","innerHeight","elemInView","prevPage","prevProfiles","discover","removeEventListener","Drawer","getElementById","height","account","search","archive","getComponent","Footer","animateOnMount","AppShell","buttons","PhotoCapture","takePic","closePic","latestPhoto","canvasElem","documentElement","viewportHeight","setProperty","stretchViewPortHeight","takePhoto","base64url","fileType","toDataURL","canvasToBase64","innerWidth","context","getContext","canvas","drawImage","sharePhoto","errorMessage","share","canShare","files","File","text","hide","button","link","download","click","downloadFile","Deform","cx","cy","r","Dog","Bees","transform","rx","ry","Liberty","Halloween","data-name","filterButtonIcons","deform","dog","bees","liberty","halloween","Camera","useReducer","prevState","initialized","isLoading","showButtons","filters","active","dispatchFilter","isBrowserCompatible","stream","capture","dispatchCamera","startCamera","mediaDevices","getUserMedia","video","facingMode","ideal","querySelector","offsetWidth","srcObject","setFilter","newFilter","newFilters","splice","JEEFACEFILTERAPI","destroy","Filters","init","errorCode","removeFilter","getTracks","track","stop","showOpenMouth","includes","autoPlay","muted","NotFound","to","store","configureStore","App","StrictMode","path","exact","ReactDOM","render"],"mappings":"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","file":"static/js/main.45e7ef71.chunk.js","sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { DrawerComponent, Drawer, FooterType } from 'AppShell/data';\n\nconst initialState: {\n  drawers: Drawer[];\n  footerType: FooterType;\n} = {\n  drawers: [],\n  footerType: 'full'\n};\n\nconst appSlice = createSlice({\n  name: 'app',\n  initialState,\n  reducers: {\n    showDrawer: {\n      reducer(state, action: PayloadAction<Drawer>) {\n        const drawer = action.payload;\n        const minusCurrentDrawer = state.drawers.filter(\n          ({ component }) => component !== drawer.component\n        );\n        state.drawers = [...minusCurrentDrawer, drawer];\n      },\n      prepare(drawer: Drawer) {\n        const drawerDefaults = {\n          animationIn: 'slideInUp',\n          animationOut: 'slideOutDown',\n          animationInDuration: 300,\n          animationOutDuration: 300,\n          theme: 'light',\n          position: 'front',\n          show: true\n        } as Drawer;\n        return {\n          payload: {\n            ...drawerDefaults,\n            ...drawer\n          }\n        };\n      }\n    },\n    hideDrawer(state, action: PayloadAction<DrawerComponent>) {\n      const component = action.payload;\n      state.drawers = state.drawers.map((drawer) => {\n        if (drawer.component === component)\n          return {\n            ...drawer,\n            show: false\n          };\n        return drawer;\n      });\n    },\n    hideAllDrawers(state) {\n      const openDrawers = state.drawers.filter(({ show }) => show);\n      const lastDrawerOpen = openDrawers[openDrawers.length - 1].component;\n      let drawers;\n\n      // If only 1 drawer is open just close it\n      if (openDrawers.length === 1) {\n        drawers = state.drawers.map((drawer) => ({\n          ...drawer,\n          show: false\n        }));\n      }\n      // If more than 1 drawer is open, close them all but show exit animation only on the last opened one\n      else {\n        drawers = state.drawers.map((drawer) => {\n          if (drawer.component === lastDrawerOpen)\n            return {\n              ...drawer,\n              show: false\n            };\n          return {\n            ...drawer,\n            show: false,\n            animationOutDuration: 0\n          };\n        });\n      }\n\n      state.drawers = drawers;\n    },\n    setFooterType(state, action: PayloadAction<FooterType>) {\n      state.footerType = action.payload;\n    }\n  }\n});\n\nexport const { showDrawer, hideDrawer, hideAllDrawers, setFooterType } = appSlice.actions;\n\nexport default appSlice.reducer;\n","// Run a callback function after an animation transition is complete\n// This is to prevent frame choppiness which happens if running too many things at once during the animation\n// 300ms is the default animation in and out duration on drawers so it's also the default here\nexport const onAnimationComplete = (callback: () => void, animationInDuration = 300) =>\n  setTimeout(callback, animationInDuration);\n","export const randomArrayVal = (arr: any[]) => arr[Math.floor(Math.random() * arr.length)];\n","export const playSound = async (sound: string, audioElem: HTMLAudioElement) => {\n  const soundMap: Record<string, string> = {\n    newAppMessage: './audio/blip.mp3',\n    cameraShutter: './audio/shutter.mp3'\n  };\n  // IOS no longer allows sounds to be played without a user action\n  // passing an audio tag from the component and setting it's `src` attribute\n  // and then paying it seems to bypass this restriction for now..\n  audioElem.src = soundMap[sound];\n  try {\n    await audioElem.play();\n  } catch (error) {}\n};\n","export const { language = 'en-US', userAgent } = navigator;\n\nexport const isMobile = (): boolean =>\n  /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent);\n","export const GENERIC_ERROR = 'Something went wrong!';\nexport const GENERIC_ERROR_RETRY = 'Something went wrong, please try again!';\n\ntype Options = Record<string, string | number | boolean | Object | any[]> | null;\n\nexport const api = {\n  baseURL: './api',\n  get: (endpoint: string, external = false) =>\n    api.respond('get', endpoint, null, external),\n  post: (endpoint: string, options: Options) => api.respond('post', endpoint, options),\n  put: (endpoint: string, options: Options) => api.respond('put', endpoint, options),\n  patch: (endpoint: string, options: Options) => api.respond('patch', endpoint, options),\n  delete: (endpoint: string) => api.respond('delete', endpoint),\n  respond: async (\n    method: string,\n    endpoint: string,\n    data?: Options,\n    external?: boolean\n  ) => {\n    const url = external ? endpoint : api.baseURL + endpoint;\n    const options = data\n      ? {\n          headers: new Headers({ 'Content-Type': 'application/json' }),\n          body: JSON.stringify(data)\n        }\n      : {};\n    try {\n      const response = await fetch(url, { method, ...options });\n      const data = await response.json();\n      return [null, data];\n    } catch (error) {\n      return [error];\n    }\n  }\n};\n\nexport const debounce = (func: () => void, wait: number) => {\n  let timeout: ReturnType<typeof setTimeout> | null;\n  return function executedFunction(...args: any) {\n    const later = () => {\n      timeout = null;\n      // @ts-ignore\n      func(...args);\n    };\n    if (timeout) clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n  };\n};\n\nexport const sleep = (milliseconds: number) =>\n  new Promise((resolve) => setTimeout(resolve, milliseconds));\n","export const canvasToBase64 = (canvasElem: HTMLCanvasElement, fileType: string): string =>\n  canvasElem.toDataURL(fileType);\n\nexport const base64ToBlob = async (base64Url: string) => {\n  const res = await fetch('data:application/octet-stream;' + base64Url);\n  return await res.blob();\n};\n\nexport const downloadFile = (base64Url: string): void => {\n  const link = document.createElement('a');\n  link.download = 'download.png';\n  link.href = base64Url;\n  link.click();\n};\n","export type Loadable<T> = {\n  loading: boolean;\n  error: boolean;\n  data: T;\n};\n\nexport const loadable = {\n  loading: false,\n  error: false,\n  data: []\n};\n","import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\nimport { api } from 'utils';\nimport { Loadable, loadable } from 'utils/loadable';\nimport { Photo, CameraMode } from './data';\n\nconst initialState: {\n  cameraMode: CameraMode;\n  photoTaken: boolean;\n  photos: Loadable<Photo[]>;\n} = {\n  cameraMode: 'user',\n  photoTaken: false,\n  photos: loadable\n};\n\nexport const getPhotos = createAsyncThunk('photos/getPhotos', async () => {\n  const [error, response] = await api.get('/photos.json');\n  if (!error) return response.photos;\n});\n\nconst cameraSlice = createSlice({\n  name: 'photos',\n  initialState,\n  reducers: {\n    setPhoto: {\n      reducer(\n        state,\n        action: PayloadAction<{\n          month: string;\n          year: number;\n          dataURL: string;\n        }>\n      ) {\n        const { month, year, dataURL } = action.payload;\n        if (state.photoTaken) {\n          state.photos.data[0].images.unshift(action.payload.dataURL);\n        } else {\n          state.photoTaken = true;\n          state.photos.data.unshift({\n            month,\n            year,\n            images: [dataURL]\n          });\n        }\n      },\n      prepare(dataURL: string) {\n        const time = new Date();\n        return {\n          payload: {\n            dataURL,\n            month: time.toLocaleString('default', { month: 'long' }),\n            year: time.getFullYear()\n          }\n        };\n      }\n    },\n    toggleCameraMode(state) {\n      state.cameraMode = state.cameraMode === 'user' ? 'environment' : 'user';\n    }\n  },\n  extraReducers: (builder) => {\n    builder.addCase(getPhotos.pending, ({ photos }) => {\n      photos.loading = true;\n    });\n    builder.addCase(getPhotos.fulfilled, ({ photos }, { payload }) => {\n      photos.loading = false;\n      if (payload) {\n        photos.data = payload;\n      } else {\n        photos.error = true;\n      }\n    });\n    builder.addCase(getPhotos.rejected, ({ photos }) => {\n      photos.loading = false;\n      photos.error = true;\n    });\n  }\n});\n\nexport const { setPhoto, toggleCameraMode } = cameraSlice.actions;\n\nexport default cameraSlice.reducer;\n","import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\nimport { api } from 'utils';\nimport { Loadable, loadable } from 'utils/loadable';\nimport { User, Geolocation } from './data';\n\nconst initialState: {\n  session: User;\n  geolocation: Geolocation;\n  friends: Loadable<User[]>;\n} = {\n  session: {\n    id: '',\n    username: '',\n    avatar: '',\n    gender: 'other',\n    age: 0,\n    fullName: ''\n  },\n  geolocation: {\n    country: '',\n    state: '',\n    city: '',\n    zip: '',\n    latitude: 0,\n    longitude: 0\n  },\n  friends: loadable\n};\n\nexport const getSession = createAsyncThunk('user/sessionFetched', async () => {\n  const [error, response] = await api.get('/session.json');\n  if (error) return false;\n  return response.session;\n});\n\nexport const getFriends = createAsyncThunk('user/friendsFetched', async () => {\n  const [error, response] = await api.get('/friends.json');\n  if (error) return false;\n  return response.friends;\n});\n\nexport const getGeoLocation = createAsyncThunk('user/geoLocationFetched', async () => {\n  const [error, response] = await api.get('https://geolocation-db.com/json/', true);\n\n  if (error) return false;\n\n  const { country_name, state, city, postal, latitude, longitude } = response;\n\n  return {\n    country: country_name,\n    state,\n    city,\n    zip: postal,\n    latitude,\n    longitude\n  };\n});\n\nconst userSlice = createSlice({\n  name: 'user',\n  initialState,\n  reducers: {\n    setLatLon(state, action: PayloadAction<{ latitude: number; longitude: number }>) {\n      const { geolocation } = state;\n      const { latitude, longitude } = action.payload;\n      geolocation.latitude = latitude;\n      geolocation.longitude = longitude;\n    }\n  },\n  extraReducers: (builder) => {\n    builder.addCase(getSession.fulfilled, (state, { payload }) => {\n      if (payload) state.session = payload;\n    });\n    builder.addCase(getGeoLocation.fulfilled, (state, { payload }) => {\n      if (payload) state.geolocation = payload;\n    });\n    builder.addCase(getFriends.pending, ({ friends }) => {\n      friends.loading = true;\n    });\n    builder.addCase(getFriends.fulfilled, ({ friends }, { payload }) => {\n      friends.loading = false;\n      if (payload) {\n        friends.data = payload;\n      } else {\n        friends.error = true;\n      }\n    });\n    builder.addCase(getFriends.rejected, ({ friends }) => {\n      friends.loading = false;\n      friends.error = true;\n    });\n  }\n});\n\nexport const { setLatLon } = userSlice.actions;\n\nexport default userSlice.reducer;\n","export const celsiusToFahrenheit = (celsius: number): number =>\n  Math.round(celsius * 1.8 + 32);\n\nexport type Weather = {\n  temperature: number;\n  condition: string;\n};\n\nexport const abbrConditionMap: Record<string, string> = {\n  sn: 'snow',\n  sl: 'sleet',\n  h: 'hail',\n  t: 'thunderstorm',\n  s: 'showers',\n  c: 'clear',\n  hr: 'heavy-rain',\n  lr: 'light-rain',\n  hc: 'heavy-cloud',\n  lc: 'light-cloud'\n};\n\nexport const conditionIconMap: Record<string, string> = {\n  snow: 'faSnowflake',\n  sleet: 'faIcicles',\n  hail: 'faCloudMeatball',\n  thunderstorm: 'faPooStorm',\n  showers: 'faCloudShowersHeavy',\n  clear: 'faSun',\n  'heavy-rain': 'faCloudShowersHeavy',\n  'light-rain': 'faCloudRain',\n  'heavy-cloud': 'faCloud',\n  'light-cloud': 'faCloudSun'\n};\n","import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport { api } from 'utils';\nimport { Snap } from 'features/Snap/SnapStore';\nimport { abbrConditionMap, celsiusToFahrenheit, Weather } from './data';\n\nconst initialState: {\n  snaps: Snap[];\n  weather: Weather;\n} = {\n  snaps: [],\n  weather: {\n    temperature: 0,\n    condition: ''\n  }\n};\n\nexport const getSnaps = createAsyncThunk(\n  'snapMap/snapsFetched',\n  async ({\n    lat,\n    lon,\n    city,\n    state\n  }: {\n    lat: number;\n    lon: number;\n    city: string;\n    state: string;\n  }) => {\n    const [error, response] = await api.get(`/snaps.json?geo=${lat},${lon}`);\n\n    if (error) return false;\n\n    // Set some dummy coordinates to make snaps seem close to user\n    const coords = [\n      {\n        lat: lat + 0.006,\n        lon: lon - 0.006\n      },\n      {\n        lat: lat + 0.009,\n        lon: lon + 0.005\n      },\n      {\n        lat: lat + 0.006,\n        lon: lon - 0.001\n      },\n      {\n        lat: lat - 0.005,\n        lon: lon - 0.002\n      },\n      {\n        lat: lat - 0.001,\n        lon: lon - 0.005\n      },\n      {\n        lat: lat + 0.005,\n        lon: lon - -0.006\n      },\n      {\n        lat: lat,\n        lon: lon + 0.004\n      }\n    ];\n\n    const snaps = response.snaps.map((snap: Snap, index: number) => ({\n      ...snap,\n      location: city && state ? `${city}, ${state}` : null,\n      lat: coords[index].lat,\n      lon: coords[index].lon\n    }));\n\n    return snaps;\n  }\n);\n\nexport const getWeather = createAsyncThunk(\n  'snapMap/weatherFetched',\n  async ({ lat, lon }: { lat: number; lon: number }) => {\n    // Hit the weather API through a free CORs proxy so we don't have to write one for this project..\n    const baseURL = `https://api.allorigins.win/get?url=${encodeURIComponent(\n      'https://www.metaweather.com/api/location'\n    )}`;\n\n    // If fetching the user's actual weather fails below for some reason\n    // store this dummy data for purposes of the demo\n    let weather = {\n      temperature: 75,\n      condition: 'clear'\n    };\n\n    let [error, response] = await api.get(\n      `${baseURL}/search/?lattlong=${lat},${lon}`,\n      true\n    );\n\n    if (error) return false;\n\n    const whereOnEarthID = JSON.parse(response.contents)[0]?.woeid;\n    [error, response] = await api.get(`${baseURL}/${whereOnEarthID}/`, true);\n\n    if (error) return false;\n\n    const { the_temp, weather_state_abbr } = JSON.parse(response?.contents)\n      .consolidated_weather[0];\n\n    weather = {\n      temperature: celsiusToFahrenheit(the_temp),\n      condition: abbrConditionMap[weather_state_abbr]\n    };\n\n    return weather;\n  }\n);\n\nconst snapMapSlice = createSlice({\n  name: 'snapMap',\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(getWeather.fulfilled, (state, { payload }) => {\n      if (payload) state.weather = payload;\n    });\n    builder.addCase(getSnaps.fulfilled, (state, { payload }) => {\n      if (payload) state.snaps = payload;\n    });\n  }\n});\n\nexport default snapMapSlice.reducer;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport type Snap = {\n  type: 'video' | 'photo' | '';\n  url: string;\n  location?: string;\n  lat?: number;\n  lon?: number;\n  time?: number;\n  caption?: string;\n  shareable?: boolean;\n};\n\nconst defaultSnap: Snap = {\n  type: '',\n  url: '',\n  location: '',\n  lat: 0,\n  lon: 0,\n  time: 0,\n  caption: '',\n  shareable: false\n};\n\nconst initialState: Snap = defaultSnap;\n\nconst snapSlice = createSlice({\n  name: 'snap',\n  initialState,\n  reducers: {\n    addSnap(state, { payload }: PayloadAction<Snap>) {\n      return payload;\n    },\n    removeSnap(state) {\n      return defaultSnap;\n    }\n  }\n});\n\nexport const { addSnap, removeSnap } = snapSlice.actions;\n\nexport default snapSlice.reducer;\n","import { createSlice, createAsyncThunk, PayloadAction } from '@reduxjs/toolkit';\nimport { api, uuidv4 } from 'utils';\nimport { Loadable, loadable } from 'utils/loadable';\nimport { Message } from './data';\n\nconst initialState: {\n  thread: string;\n  messages: Loadable<Message[]>;\n} = {\n  thread: 'Lisa',\n  messages: loadable\n};\n\nexport const getMessages = createAsyncThunk(\n  'chat/messagesReceived',\n  async (user: string) => {\n    const [error, response] = await api.get(`/messages.json?thread=${user}`);\n    if (error) return false;\n    return response.messages;\n  }\n);\n\nconst chatSlice = createSlice({\n  name: 'chat',\n  initialState,\n  reducers: {\n    postMessage: {\n      reducer(\n        state,\n        action: PayloadAction<{\n          id: string;\n          author: string;\n          message: string;\n          time: string;\n        }>\n      ) {\n        const { id, author, message, time } = action.payload;\n        state.messages.data.push({\n          id,\n          author,\n          message,\n          time\n        });\n      },\n      prepare(author: string, message: string) {\n        return {\n          payload: {\n            id: uuidv4(),\n            author,\n            message,\n            time: JSON.stringify(new Date())\n          }\n        };\n      }\n    }\n  },\n  extraReducers: (builder) => {\n    builder.addCase(getMessages.pending, ({ messages }) => {\n      messages.loading = true;\n    });\n    builder.addCase(getMessages.fulfilled, ({ messages }, { payload }) => {\n      messages.loading = false;\n      if (payload) {\n        messages.data = payload;\n      } else {\n        messages.error = true;\n      }\n    });\n    builder.addCase(getMessages.rejected, ({ messages }) => {\n      messages.loading = false;\n      messages.error = true;\n    });\n  }\n});\n\nexport const { postMessage } = chatSlice.actions;\n\nexport default chatSlice.reducer;\n","// Escape a user input string for use in a REGEX search\nexport const escapeRegex = (string: string): string =>\n  string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n\nexport const uuidv4 = (): string =>\n  'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (char) => {\n    const rand = (Math.random() * 16) | 0;\n    const val = char === 'x' ? rand : (rand & 0x3) | 0x8;\n    return val.toString(16);\n  });\n","import React from 'react';\nimport { FontAwesomeIcon, FontAwesomeIconProps } from '@fortawesome/react-fontawesome';\nimport { IconProp } from '@fortawesome/fontawesome-svg-core';\nimport {\n  faSnapchatSquare,\n  faGithub,\n  IconDefinition\n} from '@fortawesome/free-brands-svg-icons';\nimport { faCircle } from '@fortawesome/free-regular-svg-icons';\nimport {\n  faCamera,\n  faUserPlus,\n  faListAlt,\n  faGrinBeam,\n  faAngleRight,\n  faCompass,\n  faUserCircle,\n  faSearch,\n  faRetweet,\n  faAngleDown,\n  faLocationArrow,\n  faSignal,\n  faBatteryHalf,\n  faCommentAlt,\n  faMobile,\n  faMobileAlt,\n  faCircle as faDot,\n  faLaugh,\n  faSmileWink,\n  faEllipsisV,\n  faEllipsisH,\n  faCog,\n  faTimesCircle,\n  faTimes,\n  faAngleLeft,\n  faSearchPlus,\n  faPaw,\n  faSpider,\n  faWater,\n  faPhoneAlt,\n  faVideo,\n  faRocket,\n  faMicrophone,\n  faDownload,\n  faTextHeight,\n  faPen,\n  faStickyNote,\n  faCut,\n  faPaperclip,\n  faCropAlt,\n  faStopwatch,\n  faExternalLinkAlt,\n  faPlayCircle,\n  faEdit,\n  faMagic,\n  faQrcode,\n  faSnowflake,\n  faIcicles,\n  faCloudMeatball,\n  faPooStorm,\n  faCloudShowersHeavy,\n  faCloudRain,\n  faCloud,\n  faCloudSun,\n  faSun,\n  faExclamationCircle\n} from '@fortawesome/free-solid-svg-icons';\nimport './Icon.scss';\n\nexport const iconMap: Record<string, IconDefinition> = {\n  // free-brands-svg-icons\n  faSnapchatSquare,\n  faGithub,\n  // free-regular-svg-icons\n  faCircle,\n  // free-solid-svg-icons\n  faCamera,\n  faUserPlus,\n  faListAlt,\n  faGrinBeam,\n  faAngleRight,\n  faCompass,\n  faUserCircle,\n  faSearch,\n  faRetweet,\n  faAngleDown,\n  faLocationArrow,\n  faSignal,\n  faBatteryHalf,\n  faCommentAlt,\n  faMobile,\n  faMobileAlt,\n  faDot,\n  faLaugh,\n  faSmileWink,\n  faEllipsisV,\n  faEllipsisH,\n  faCog,\n  faTimesCircle,\n  faTimes,\n  faAngleLeft,\n  faSearchPlus,\n  faPaw,\n  faSpider,\n  faWater,\n  faPhoneAlt,\n  faVideo,\n  faRocket,\n  faMicrophone,\n  faDownload,\n  faTextHeight,\n  faPen,\n  faStickyNote,\n  faCut,\n  faPaperclip,\n  faCropAlt,\n  faStopwatch,\n  faExternalLinkAlt,\n  faPlayCircle,\n  faEdit,\n  faMagic,\n  faQrcode,\n  faSnowflake,\n  faIcicles,\n  faCloudMeatball,\n  faPooStorm,\n  faCloudShowersHeavy,\n  faCloudRain,\n  faCloud,\n  faCloudSun,\n  faSun,\n  faExclamationCircle\n};\n\nconst Icon: React.FC<Readonly<{ name: string } & Partial<FontAwesomeIconProps>>> = ({\n  name,\n  ...libraryProps\n}) => (\n  <FontAwesomeIcon\n    {...libraryProps}\n    icon={iconMap[name] as IconProp}\n    className={`icon ${libraryProps.className}`}\n  />\n);\n\nexport default Icon;\n","import React from 'react';\nimport classNames from 'classnames';\nimport Icon from 'components/Icon/Icon';\nimport './Button.scss';\n\nconst Button: React.FC<\n  Readonly<{\n    image?: string;\n    svg?: JSX.Element;\n    icon?: string;\n    icons?: string[];\n    iconClass?: string;\n    iconClasses?: string[];\n    round?: boolean;\n    plain?: boolean;\n    purple?: boolean;\n    label?: string;\n    testId?: string;\n  }> &\n    React.ButtonHTMLAttributes<HTMLButtonElement>\n> = ({\n  image,\n  svg,\n  icon,\n  icons,\n  iconClass = '',\n  iconClasses = [],\n  round,\n  plain,\n  purple,\n  label,\n  testId,\n  ...nativeElemProps\n}) => (\n  <button\n    type=\"button\"\n    data-test={testId}\n    {...nativeElemProps}\n    className={classNames('btn', nativeElemProps.className, {\n      round,\n      plain,\n      purple\n    })}\n  >\n    {image && <img src={image} alt=\"\" />}\n\n    {svg && svg}\n\n    {icons &&\n      icons.map((icon, index) => (\n        <Icon key={icon + index} name={icon} className={iconClasses[index]} />\n      ))}\n\n    {icon && <Icon name={icon} className={iconClass} />}\n\n    {label && <strong>{label}</strong>}\n  </button>\n);\n\nexport default Button;\n","import React, { useRef, useState, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { onAnimationComplete } from 'utils';\nimport Icon from 'components/Icon/Icon';\nimport './Input.scss';\n\nconst Input: React.FC<\n  Readonly<\n    {\n      leftIcon?: string;\n      rightIcon?: string;\n      onEnter?: () => void;\n      focus?: boolean;\n      spellCheck?: boolean;\n      animate?: boolean;\n      dark?: boolean;\n    } & React.InputHTMLAttributes<HTMLInputElement>\n  >\n> = ({\n  leftIcon,\n  rightIcon,\n  onEnter,\n  focus,\n  spellCheck,\n  animate,\n  dark,\n  ...nativeElemProps\n}) => {\n  const inputElem = useRef<HTMLInputElement>(null);\n  const [full, setFull] = useState(false);\n\n  useEffect(() => {\n    if (animate) setFull(true);\n    onAnimationComplete(() => focus && inputElem.current?.focus());\n  }, [animate, focus]);\n\n  const disabled = nativeElemProps.onClick ? true : false;\n\n  return (\n    <div\n      className={classNames('input', {\n        animate,\n        full,\n        dark\n      })}\n      data-test=\"input\"\n    >\n      {disabled && <div className=\"disabled-overlay\" onClick={nativeElemProps.onClick} />}\n      {leftIcon && <Icon name={leftIcon} className=\"left-icon\" />}\n      <input\n        ref={inputElem}\n        type=\"text\"\n        onKeyPress={({ key }) => onEnter && key === 'Enter' && onEnter()}\n        disabled={disabled}\n        spellCheck={spellCheck || false}\n        data-test=\"field\"\n        {...nativeElemProps}\n        className={classNames(nativeElemProps.className, {\n          'has-left-icon': leftIcon\n        })}\n      />\n      {rightIcon && <Icon name={rightIcon} className=\"right-icon\" />}\n    </div>\n  );\n};\n\nexport default Input;\n","import React from 'react';\nimport { useSelector, useDispatch, RootStateOrAny } from 'react-redux';\nimport { showDrawer } from 'AppShell/AppShellStore';\nimport { toggleCameraMode } from 'features/Camera/CameraStore';\nimport { isMobile } from 'utils';\nimport Icon from 'components/Icon/Icon';\nimport Button from 'components/Button/Button';\nimport Input from 'components/Input/Input';\nimport './Header.scss';\n\nconst Header: React.FC<\n  Readonly<{\n    insideDrawer?: boolean;\n  }>\n> = ({ insideDrawer }) => {\n  const dispatch = useDispatch();\n  const { session } = useSelector(({ user }: RootStateOrAny) => user);\n\n  const iconImage = session?.avatar\n    ? { image: session.avatar }\n    : { icon: 'faUserCircle' };\n\n  return (\n    <header className=\"header\" data-test=\"header\">\n      <Button\n        {...iconImage}\n        onClick={() => dispatch(showDrawer({ component: 'account' }))}\n        className=\"btn-user\"\n        testId=\"btn-user\"\n      />\n      <Input\n        placeholder=\"Search\"\n        leftIcon=\"faSearch\"\n        rightIcon=\"faUserPlus\"\n        dark={insideDrawer}\n        onClick={() =>\n          dispatch(\n            showDrawer({\n              component: 'search',\n              animationIn: 'fadeIn',\n              animationOut: 'fadeOut',\n              animationInDuration: 200,\n              animationOutDuration: 200\n            })\n          )\n        }\n      />\n      <div className=\"right\">\n        {insideDrawer ? (\n          <Icon name=\"faEllipsisH\" />\n        ) : (\n          <Button\n            icon=\"faRetweet\"\n            className=\"btn-flip-camera\"\n            onClick={() => {\n              if (isMobile()) {\n                dispatch(toggleCameraMode());\n              } else {\n                alert('You need a front facing camera for this, try it on your phone.');\n              }\n            }}\n          />\n        )}\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n","export const atleastOneDrawerOpen = (drawers: Drawer[]): boolean =>\n  drawers.some(({ show }) => show);\n\nexport type DrawerComponent =\n  | 'account'\n  | 'search'\n  | 'snapMap'\n  | 'snap'\n  | 'archive'\n  | 'chat'\n  | 'discover';\n\nexport type Drawer = {\n  component: DrawerComponent;\n  animationIn?: AnimationType;\n  animationOut?: AnimationType;\n  animationInDuration?: number;\n  animationOutDuration?: number;\n  theme?: 'light' | 'dark' | 'stripped';\n  position?: 'front' | 'back';\n  show?: boolean;\n};\n\nexport type FooterType = 'full' | 'collapsed' | 'none';\n\nexport type AnimationType =\n  | 'bounce'\n  | 'flash'\n  | 'pulse'\n  | 'rubberBand'\n  | 'shake'\n  | 'headShake'\n  | 'swing'\n  | 'tada'\n  | 'wobble'\n  | 'jello'\n  | 'bounceIn'\n  | 'bounceInDown'\n  | 'bounceInLeft'\n  | 'bounceInRight'\n  | 'bounceInUp'\n  | 'bounceOut'\n  | 'bounceOutDown'\n  | 'bounceOutLeft'\n  | 'bounceOutRight'\n  | 'bounceOutUp'\n  | 'fadeIn'\n  | 'fadeInDown'\n  | 'fadeInDownBig'\n  | 'fadeInLeft'\n  | 'fadeInLeftBig'\n  | 'fadeInRight'\n  | 'fadeInRightBig'\n  | 'fadeInUp'\n  | 'fadeInUpBig'\n  | 'fadeOut'\n  | 'fadeOutDown'\n  | 'fadeOutDownBig'\n  | 'fadeOutLeft'\n  | 'fadeOutLeftBig'\n  | 'fadeOutRight'\n  | 'fadeOutRightBig'\n  | 'fadeOutUp'\n  | 'fadeOutUpBig'\n  | 'flipInX'\n  | 'flipInY'\n  | 'flipOutX'\n  | 'flipOutY'\n  | 'lightSpeedIn'\n  | 'lightSpeedOut'\n  | 'rotateIn'\n  | 'rotateInDownLeft'\n  | 'rotateInDownRight'\n  | 'rotateInUpLeft'\n  | 'rotateInUpRight'\n  | 'rotateOut'\n  | 'rotateOutDownLeft'\n  | 'rotateOutDownRight'\n  | 'rotateOutUpLeft'\n  | 'rotateOutUpRight'\n  | 'hinge'\n  | 'jackInTheBox'\n  | 'rollIn'\n  | 'rollOut'\n  | 'zoomIn'\n  | 'zoomInDown'\n  | 'zoomInLeft'\n  | 'zoomInRight'\n  | 'zoomInUp'\n  | 'zoomOut'\n  | 'zoomOutDown'\n  | 'zoomOutLeft'\n  | 'zoomOutRight'\n  | 'zoomOutUp'\n  | 'slideInDown'\n  | 'slideInLeft'\n  | 'slideInRight'\n  | 'slideInUp'\n  | 'slideOutDown'\n  | 'slideOutLeft'\n  | 'slideOutRight'\n  | 'slideOutUp';\n","import React, { useState, useEffect } from 'react';\nimport { useSelector, RootStateOrAny } from 'react-redux';\nimport classNames from 'classnames';\nimport { language } from 'utils';\nimport { atleastOneDrawerOpen } from '../data';\nimport Icon from 'components/Icon/Icon';\nimport './Toolbar.scss';\n\nconst Toolbar: React.FC = () => {\n  const { drawers } = useSelector(({ app }: RootStateOrAny) => app);\n  const [time, setTime] = useState('');\n\n  const updateTime = () => {\n    const time = new Date()\n      .toLocaleTimeString(language, {\n        hour: 'numeric',\n        minute: '2-digit'\n      })\n      .replace(/AM|PM/, '');\n    setTime(time);\n  };\n\n  useEffect(() => {\n    updateTime();\n    setInterval(updateTime, 1000);\n  }, []);\n\n  return (\n    <div\n      className={classNames('toolbar', {\n        dark: atleastOneDrawerOpen(drawers)\n      })}\n    >\n      <div className=\"left\">\n        <time>{time}</time>\n        <Icon name=\"faLocationArrow\" />\n      </div>\n      <div className=\"right\">\n        <Icon name=\"faSignal\" className=\"icon-signal\" />\n        <Icon name=\"faBatteryHalf\" />\n      </div>\n    </div>\n  );\n};\n\nexport default Toolbar;\n","import React from 'react';\nimport classNames from 'classnames';\nimport './Section.scss';\n\nconst Section: React.FC<\n  Readonly<\n    {\n      header: string;\n      transparent?: boolean;\n    } & React.HTMLAttributes<HTMLElement>\n  >\n> = ({ header, transparent, children, ...nativeElemProps }) => (\n  <section\n    {...nativeElemProps}\n    className={classNames('section', nativeElemProps.className)}\n  >\n    <header>{header}</header>\n    <div\n      className={classNames('inner-content', {\n        transparent\n      })}\n    >\n      {children}\n    </div>\n  </section>\n);\n\nexport default Section;\n","import React from 'react';\nimport classNames from 'classnames';\nimport Icon from 'components/Icon/Icon';\nimport Button from 'components/Button/Button';\nimport './MenuItem.scss';\n\nconst MenuItem: React.FC<\n  Readonly<{\n    leftIcon: string;\n    rightIcon: string;\n    label: string;\n    straightEdge?: boolean;\n  }>\n> = ({ leftIcon, rightIcon, label, straightEdge }) => (\n  <article\n    className={classNames('menu-item', {\n      'straight-edge': straightEdge\n    })}\n  >\n    <Icon name={leftIcon} className=\"ico-left\" />\n    {label}\n    <Button icon={rightIcon} className=\"ico-right\" />\n  </article>\n);\n\nexport default MenuItem;\n","import React from 'react';\nimport classNames from 'classnames';\nimport './Loader.scss';\n\nconst Loader: React.FC<\n  Readonly<{\n    fixed?: boolean;\n    nobg?: boolean;\n    message?: string;\n  }>\n> = ({ fixed, nobg, message }) => (\n  <div\n    className={classNames('loading', {\n      fixed,\n      message,\n      nobg\n    })}\n  >\n    <div className=\"center\">\n      <div className=\"sk-cube-grid\">\n        {new Array(9).fill(null).map((val, index) => (\n          <div key={`cube-${index}`} className={'sk-cube sk-cube' + index} />\n        ))}\n      </div>\n      {message && <span>{message}</span>}\n    </div>\n  </div>\n);\n\nexport default Loader;\n","import React, { useRef, useState, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport mapboxgl from 'mapbox-gl';\nimport { showDrawer } from 'AppShell/AppShellStore';\nimport { getGeoLocation, setLatLon } from 'features/User/UserStore';\nimport Loader from 'components/Loader/Loader';\nimport './Map.scss';\n\nconst apiKey = process.env.REACT_APP_MAP_BOX_API_KEY;\n\nlet hasApiKey = false;\nif (apiKey && apiKey !== 'REPLACE_WITH_API_KEY') {\n  hasApiKey = true;\n  mapboxgl.accessToken = apiKey;\n}\n\nconst Map: React.FC = () => {\n  const dispatch = useDispatch();\n  const mapElem = useRef<HTMLDivElement>(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (hasApiKey) {\n      getUserLocation();\n    }\n  }, []);\n\n  const getUserLocation = async () => {\n    // Attempt to get the user's geo location via this endpoint `https://geolocation-db.com/json/` (IP based)\n    // if it fails ask the user for their location via the `navigator.geolocation` API (much slower)\n    const response: any = await dispatch(getGeoLocation());\n\n    if (response.payload) {\n      const { latitude, longitude } = response.payload;\n      loadMap(latitude, longitude);\n    } else {\n      const respond = (lat: number, lon: number) => {\n        loadMap(lat, lon);\n\n        dispatch(\n          setLatLon({\n            latitude: lat,\n            longitude: lon\n          })\n        );\n      };\n\n      // If the browser doesn't support geolocation or the call failed\n      // set a dummy location for purposes of the demo (Times Sq, NYC)\n      const dummyResponse = () => respond(40.75491, -73.994102);\n\n      if ('geolocation' in navigator) {\n        navigator.geolocation.getCurrentPosition(\n          ({ coords }) => {\n            respond(coords.latitude, coords.longitude);\n          },\n          (error) => {\n            dummyResponse();\n          },\n          {\n            maximumAge: Infinity,\n            timeout: 5000,\n            enableHighAccuracy: true\n          }\n        );\n      } else {\n        dummyResponse();\n      }\n    }\n  };\n\n  const loadMap = (lat: number, lon: number) => {\n    if (mapElem.current) {\n      const map = new mapboxgl.Map({\n        container: mapElem.current,\n        style: 'mapbox://styles/mapbox/streets-v11',\n        center: [lon, lat],\n        zoom: 13,\n        interactive: false\n      }).on('load', () => {\n        setLoading(false);\n        // Add self marker\n        const tooltip = document.createElement('div');\n        tooltip.classList.add('self-marker');\n        const marker = new mapboxgl.Marker(tooltip).setLngLat([lon, lat]);\n        marker.addTo(map);\n      });\n    }\n  };\n\n  return (\n    <div\n      className=\"preview-map\"\n      data-test=\"preview-map\"\n      onClick={() =>\n        hasApiKey &&\n        dispatch(\n          showDrawer({\n            component: 'snapMap',\n            animationIn: 'fadeIn',\n            animationOut: 'fadeOut',\n            animationInDuration: 0,\n            animationOutDuration: 0,\n            theme: 'stripped'\n          })\n        )\n      }\n    >\n      {!hasApiKey ? (\n        <div className=\"api-key-msg\">\n          <p>\n            <span role=\"img\" aria-label=\"earth emoji\">\n              🌎\n            </span>{' '}\n            Get a free mapboxgl{' '}\n            <a\n              href=\"https://docs.mapbox.com/help/glossary/access-token/\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              API key here\n            </a>\n            , then rename the <code>.env.sample</code> file at the root of the project to\n            just <code>.env</code> and place the key inside, finally run\n            <code>npm start</code> again to view the snap map features!\n          </p>\n        </div>\n      ) : loading ? (\n        <Loader />\n      ) : null}\n\n      {hasApiKey && <div className=\"map\" ref={mapElem} />}\n    </div>\n  );\n};\n\nexport default Map;\n","import React from 'react';\n\nexport const Logo: React.FC = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 502 502\">\n    <title>Snapchat logo</title>\n    <path\n      fill=\"#fffc00\"\n      stroke=\"#231f20\"\n      strokeWidth=\"10\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      strokeMiterlimit=\"10\"\n      d=\"M5 5h492v492H5z\"\n    />\n    <path d=\"M497 502H5a5 5 0 0 1-5-5V5a5 5 0 0 1 5-5h492a5 5 0 0 1 5 5v492a5 5 0 0 1-5 5zM10 492h482V10H10v482z\" />\n    <path d=\"M448 455.192h-43c-2.762 0-5-2.238-5-5s2.238-5 5-5h43c2.762 0 5 2.238 5 5s-2.238 5-5 5zm-93 0H55c-2.762 0-5-2.238-5-5s2.238-5 5-5h300c2.762 0 5 2.238 5 5s-2.238 5-5 5z\" />\n    <path\n      d=\"M155.019 181.192c-.14-15.659 1.026-30.723 5.656-41.104 23.125-51.851 72.164-55.879 86.643-55.879 2.401 0 4.803-.048 7.205-.067 14.513 0 63.659 4.036 86.797 55.915 7.718 17.307 5.808 47.637 4.27 72.007l-.064 1.06c-.213 3.394-.419 6.692-.592 9.85.369.376 3.328 3.225 10.011 3.482h.007c5.078-.195 10.915-1.814 17.32-4.814 1.878-.876 3.963-1.061 5.382-1.061 2.168 0 4.365.419 6.19 1.181l.111.045c5.181 1.836 8.575 5.468 8.648 9.262.067 3.573-2.66 8.946-16.042 14.232-1.387.545-3.16 1.108-5.037 1.703-7.65 2.428-19.192 6.091-22.73 14.432-2.473 5.819-.093 11.252 1.926 16.69.96 2.237 24.072 54.945 75.68 63.449 2.917.481 3.623 3.832 2.634 6.1-2.128 4.979-11.725 12.038-45.294 17.225-2.742.421-3.805 3.995-5.442 11.488-.595 2.727-1.198 5.406-2.027 8.223-.715 2.445-2.238 3.588-4.801 3.588h-.417c-1.778 0-4.307-.318-7.512-.947-5.683-1.112-12.055-2.136-20.162-2.136-4.734 0-9.633.414-14.556 1.228-10.071 1.679-18.621 7.716-27.672 14.114-13.158 9.305-27.864 17.401-49.027 17.401-20.548 0-34.752-5.713-51.255-17.381-9.067-6.407-17.624-12.455-27.706-14.134-4.919-.814-9.816-1.228-14.548-1.228-8.525 0-15.25 1.316-20.16 2.276-2.984.584-5.558 1.086-7.514 1.086-2.044 0-4.259-.442-5.221-3.731-.837-2.849-1.441-5.608-2.023-8.277-1.5-6.87-2.564-11.095-5.444-11.536-33.557-5.183-43.161-12.251-45.303-17.266-.959-2.269-.283-5.608 2.643-6.085 51.585-8.495 74.717-61.218 75.678-63.457 2.224-5.249 4.315-11.059 1.926-16.688-3.54-8.343-15.085-12.01-22.728-14.434-1.87-.592-3.643-1.151-5.041-1.703-15.25-6.029-16.519-12.218-15.92-15.372 1.022-5.374 8.205-9.12 14.013-9.12 1.593 0 2.995.282 4.174.833 6.86 3.214 13.043 4.843 18.378 4.843 7.371 0 10.589-3.098 10.982-3.504l-2.036-41.789z\"\n      fill=\"#fff\"\n    />\n    <path d=\"M252.125 422.858c-20.34 0-35.52-5.131-54.142-18.299-8.586-6.066-16.69-11.794-25.641-13.284-4.649-.77-9.27-1.16-13.727-1.16-8.032 0-14.479 1.261-19.188 2.181-3.244.635-6.035 1.182-8.486 1.182-6.853 0-9.219-4.591-10.02-7.326-.896-3.053-1.541-6.009-2.109-8.616-.495-2.267-1.373-6.291-2.129-7.787-28.664-4.503-44.474-11.086-48.331-20.117-1.193-2.821-1.051-6.156.363-8.719 1.281-2.32 3.438-3.836 6.072-4.266 48.873-8.048 70.972-58.354 71.889-60.492 2.317-5.471 3.379-9.323 1.919-12.765-2.645-6.231-12.87-9.475-19.638-11.621-1.996-.631-3.821-1.209-5.364-1.817-17.667-6.985-20.081-15.252-18.997-20.957 1.548-8.145 11.028-13.186 18.925-13.186 2.321 0 4.438.438 6.287 1.301 6.196 2.903 11.666 4.374 16.265 4.374 5.253 0 7.329-1.925 7.415-2.007a4.983 4.983 0 0 1 7.056-.106c1.986 1.919 2.026 5.098.107 7.084-1.141 1.18-5.562 5.029-14.578 5.029-6.076 0-12.974-1.788-20.5-5.315-.501-.233-1.214-.359-2.052-.359-3.956 0-8.634 2.598-9.101 5.053-.288 1.516 2.026 5.511 12.846 9.789 1.218.479 2.883 1.007 4.646 1.564 8.582 2.722 21.448 6.802 25.889 17.269 3.14 7.399.652 14.509-1.926 20.593-1.004 2.342-24.813 56.524-78.018 66.188 1.466 2.197 8.482 8.681 41.159 13.728 6.418.986 7.947 7.994 9.565 15.413.56 2.564 1.138 5.217 1.936 7.934l.041.129c.099.006.224.011.383.011 1.481 0 3.945-.482 6.553-.993 5.124-1.001 12.12-2.369 21.121-2.369 5.003 0 10.172.436 15.364 1.296 11.213 1.867 20.226 8.235 29.768 14.978 16.98 12.008 30.09 16.47 48.377 16.47 20.066 0 34.035-7.923 46.141-16.483 9.106-6.438 18.521-13.094 29.736-14.963 5.202-.861 10.374-1.297 15.378-1.297 8.547 0 15.202 1.071 21.121 2.229 3.594.706 5.547.854 6.553.854h.422c.786-2.671 1.365-5.25 1.938-7.877 1.615-7.395 3.14-14.377 9.568-15.364 32.647-5.045 39.672-11.49 41.15-13.701-53.167-9.662-77.009-63.835-78.006-66.157a6.667 6.667 0 0 1-.094-.233l-.406-1.087c-2.015-5.36-4.521-12.031-1.434-19.298 4.435-10.457 17.304-14.541 25.819-17.243 1.706-.54 3.467-1.099 4.723-1.592 9.558-3.775 12.908-7.469 12.87-9.482-.026-1.347-1.899-3.433-5.319-4.645a3.967 3.967 0 0 1-.215-.082l-.11-.045c-2.326-.969-5.803-1.045-7.574-.22-7.004 3.281-13.48 5.06-19.242 5.279a4.227 4.227 0 0 1-.39 0c-8.199-.313-12.32-3.887-13.388-4.975a4.997 4.997 0 0 1-1.425-3.776c.173-3.17.38-6.482.594-9.89l.063-1.045c1.505-23.834 3.377-53.477-3.845-69.672-21.913-49.133-68.48-52.951-82.23-52.951-.845.007-1.73.019-2.616.029-1.529.02-3.06.038-4.589.038-13.718 0-60.178 3.815-82.076 52.915-3.676 8.24-5.385 21.005-5.224 39.023a5 5 0 0 1-4.955 5.045h-.046a5 5 0 0 1-4.999-4.955c-.176-19.754 1.76-33.477 6.091-43.187 24.351-54.599 75.969-58.842 91.209-58.842 1.487 0 2.976-.019 4.464-.037.9-.012 1.801-.022 2.7-.03 15.313 0 67.038 4.246 91.404 58.879 8.225 18.442 6.267 49.446 4.693 74.358l-.063 1.043c-.15 2.391-.296 4.727-.43 6.998 1.036.454 2.62.923 4.863 1.03 4.377-.203 9.489-1.662 15.201-4.338 2.717-1.268 5.579-1.533 7.503-1.533 2.802 0 5.672.552 8.087 1.554 7.097 2.556 11.748 7.977 11.861 13.838.142 7.504-6.319 13.889-19.204 18.979-1.578.62-3.503 1.229-5.363 1.819-6.768 2.147-16.998 5.394-19.638 11.618-1.451 3.414-.341 6.735 1.589 11.873l.372.994c1.438 3.298 23.628 52.439 71.854 60.386 2.652.437 4.817 1.973 6.096 4.324 1.406 2.586 1.523 5.924.307 8.71-3.832 8.968-19.645 15.537-48.317 20.042-.767 1.564-1.695 5.813-2.115 7.737-.613 2.812-1.236 5.584-2.114 8.567-1.335 4.559-4.834 7.177-9.599 7.177h-.417c-2.14 0-4.912-.341-8.477-1.041-5.421-1.061-11.502-2.042-19.197-2.042-4.459 0-9.081.391-13.739 1.161-8.95 1.492-17.039 7.21-25.602 13.264-13.45 9.51-29.05 18.315-51.911 18.315z\" />\n    <path d=\"M156.028 211.192a5 5 0 0 1-4.986-4.696c-.2-3.293-.393-6.661-.557-10.063a4.999 4.999 0 0 1 4.753-5.235 4.989 4.989 0 0 1 5.235 4.753c.162 3.358.353 6.686.551 9.938a5.002 5.002 0 0 1-4.996 5.303z\" />\n  </svg>\n);\n","import React from 'react';\nimport { useSelector, useDispatch, RootStateOrAny } from 'react-redux';\nimport { hideDrawer } from 'AppShell/AppShellStore';\nimport { language } from 'utils';\nimport Button from 'components/Button/Button';\nimport Section from 'components/Section/Section';\nimport MenuItem from 'components/MenuItem/MenuItem';\nimport Icon from 'components/Icon/Icon';\nimport Map from './Map/Map';\nimport { Logo } from './Logo.svg';\nimport './Account.scss';\n\nconst currentDate = new Date().toLocaleDateString(language, {\n  year: 'numeric',\n  month: 'long',\n  day: 'numeric'\n});\n\nconst Account: React.FC = () => {\n  const dispatch = useDispatch();\n  const {\n    session: { username }\n  } = useSelector(({ user }: RootStateOrAny) => user);\n\n  return (\n    <main className=\"account\">\n      <header>\n        <Button\n          icon=\"faAngleDown\"\n          onClick={() => dispatch(hideDrawer('account'))}\n          className=\"btn-close\"\n        />\n        <Icon name=\"faCog\" className=\"ico-gear\" />\n      </header>\n      <div className=\"logo\">\n        <Logo />\n        <strong>{username}</strong>\n      </div>\n      <Section header=\"Stories\" transparent>\n        <MenuItem leftIcon=\"faCamera\" rightIcon=\"faEllipsisV\" label=\"Add to My Story\" />\n        <MenuItem leftIcon=\"faCamera\" rightIcon=\"faEllipsisV\" label=\"Add to Our Story\" />\n      </Section>\n      <Section header=\"Friends\" transparent>\n        <MenuItem leftIcon=\"faUserPlus\" rightIcon=\"faAngleRight\" label=\"Add Friends\" />\n        <MenuItem leftIcon=\"faListAlt\" rightIcon=\"faAngleRight\" label=\"My Friends\" />\n      </Section>\n      <Section header=\"Bitmoji\" transparent>\n        <MenuItem leftIcon=\"faGrinBeam\" rightIcon=\"faAngleRight\" label=\"Create Bitmoji\" />\n      </Section>\n      <Section header=\"Snap Map\">\n        <Map />\n        <MenuItem\n          leftIcon=\"faCompass\"\n          rightIcon=\"faAngleRight\"\n          label=\"Set a Status\"\n          straightEdge\n        />\n      </Section>\n      <footer>\n        <p>\n          <a\n            href=\"https://github.com/TowhidKashem/snapchat-clone\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            title=\"Github Repo\"\n          >\n            <Icon name=\"faGithub\" />\n          </a>\n          Joined Snapchat on {currentDate}\n        </p>\n      </footer>\n    </main>\n  );\n};\n\nexport default Account;\n","import React from 'react';\nimport './Avatar.scss';\n\nexport const sizeMap: Record<string, number> = {\n  sm: 45,\n  md: 100,\n  lg: 150\n};\n\nexport type sizeType = keyof typeof sizeMap;\n\nconst Avatar: React.FC<\n  Readonly<{\n    src: string;\n    size?: sizeType;\n  }>\n> = ({ src, size = 'md' }) => (\n  <img src={src} className=\"avatar\" alt=\"\" width={sizeMap[size]} />\n);\n\nexport default Avatar;\n","import React from 'react';\nimport { User } from 'features/User/data';\nimport Avatar from 'components/Avatar/Avatar';\nimport './UserCard.scss';\n\nconst UserCard: React.FC<\n  Readonly<{\n    user: User;\n  }>\n> = ({ user: { username, fullName, avatar } }) => (\n  <article className=\"user-card\">\n    <Avatar src={avatar} size=\"sm\" />\n    <div className=\"meta\">\n      <header>{fullName}</header>\n      <span>{username}</span>\n    </div>\n  </article>\n);\n\nexport default UserCard;\n","import React from 'react';\nimport Icon from 'components/Icon/Icon';\nimport './Error.scss';\n\nconst Error: React.FC<\n  Readonly<{\n    message?: string;\n  }>\n> = ({ message = \"Oops couldn't load content\" }) => (\n  <div className=\"error\">\n    <p>\n      <Icon name=\"faExclamationCircle\" /> {message}\n    </p>\n  </div>\n);\n\nexport default Error;\n","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch, RootStateOrAny } from 'react-redux';\nimport { Animated } from 'react-animated-css';\nimport { hideDrawer } from 'AppShell/AppShellStore';\nimport { User } from 'features/User/data';\nimport { escapeRegex } from 'utils';\nimport Input from 'components/Input/Input';\nimport Button from 'components/Button/Button';\nimport Section from 'components/Section/Section';\nimport UserCard from 'components/UserCard/UserCard';\nimport Loader from 'components/Loader/Loader';\nimport Error from 'components/Error/Error';\nimport './Search.scss';\n\nconst Search: React.FC<\n  Readonly<{\n    show: boolean;\n  }>\n> = ({ show }) => {\n  const dispatch = useDispatch();\n  const {\n    friends: { loading, error, data }\n  } = useSelector(({ user }: RootStateOrAny) => user);\n  const [query, setQuery] = useState('');\n\n  useEffect(() => {\n    if (!show) setQuery('');\n  }, [show]);\n\n  const pattern = new RegExp(escapeRegex(query), 'gi');\n  const users = query\n    ? data.filter(\n        ({ fullName, username }: User) =>\n          fullName.match(pattern) || username.match(pattern)\n      )\n    : data;\n  const hasResults = users.length > 0;\n\n  return (\n    <main className=\"search\">\n      <header>\n        <Input\n          placeholder=\"Search\"\n          leftIcon=\"faSearch\"\n          value={query}\n          onChange={(e) => setQuery(e.currentTarget.value)}\n          focus={show}\n          animate\n          dark\n        />\n        <Button\n          label=\"Cancel\"\n          plain\n          onClick={() => dispatch(hideDrawer('search'))}\n          testId=\"btn-cancel\"\n        />\n      </header>\n      <section>\n        {loading ? (\n          <Loader nobg />\n        ) : error ? (\n          <Error />\n        ) : (\n          <Animated\n            animationIn=\"slideInUp\"\n            animationOut=\"slideOutDown\"\n            animationInDuration={250}\n            animationOutDuration={0}\n            isVisible={show}\n          >\n            <div className=\"results\">\n              {hasResults && (\n                <Section header=\"Quick Add\">\n                  {users.map((user: User) => (\n                    <UserCard key={user.id} user={user} />\n                  ))}\n                </Section>\n              )}\n            </div>\n            {query && !hasResults && (\n              <p className=\"no-results\">\n                <span role=\"img\" aria-label=\"poop emoji\">\n                  💩\n                </span>{' '}\n                No results\n              </p>\n            )}\n          </Animated>\n        )}\n      </section>\n    </main>\n  );\n};\n\nexport default Search;\n","import React from 'react';\nimport { useSelector, useDispatch, RootStateOrAny } from 'react-redux';\nimport { hideDrawer } from 'AppShell/AppShellStore';\nimport Button from 'components/Button/Button';\nimport Icon from 'components/Icon/Icon';\nimport { conditionIconMap } from '../data';\nimport './Header.scss';\n\nconst Header: React.FC = () => {\n  const dispatch = useDispatch();\n  const {\n    user: {\n      geolocation: { city }\n    },\n    snapMap: {\n      weather: { temperature, condition }\n    }\n  } = useSelector(({ user, snapMap }: RootStateOrAny) => ({ user, snapMap }));\n\n  return (\n    <header className=\"weather-header\">\n      <div className=\"left\">\n        <Button\n          icon=\"faTimes\"\n          onClick={() => dispatch(hideDrawer('snapMap'))}\n          className=\"btn-close\"\n          testId=\"btn-close\"\n          round\n        />\n        <Button icon=\"faSearch\" round />\n      </div>\n      <div className=\"center\">\n        <article className=\"weather\">\n          <header>{city}</header>\n          <div className=\"condition\">\n            {condition && <Icon name={conditionIconMap[condition]} />}\n            <span className=\"temperature\">{temperature}&deg;F</span>\n          </div>\n        </article>\n      </div>\n      <div className=\"right\">\n        <Button icon=\"faCog\" round />\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n","import React, { useRef, useEffect, useState } from 'react';\nimport { useSelector, useDispatch, RootStateOrAny } from 'react-redux';\nimport mapboxgl, { Map } from 'mapbox-gl';\nimport { onAnimationComplete } from 'utils';\nimport { getSnaps, getWeather } from './SnapMapStore';\nimport { showDrawer } from 'AppShell/AppShellStore';\nimport { addSnap, Snap } from 'features/Snap/SnapStore';\nimport Loader from 'components/Loader/Loader';\nimport Header from './Header/Header';\nimport './SnapMap.scss';\n\nconst apiKey = process.env.REACT_APP_MAP_BOX_API_KEY;\nif (apiKey) {\n  mapboxgl.accessToken = apiKey;\n}\n\nconst SnapMap: React.FC = () => {\n  const dispatch = useDispatch();\n  const {\n    user: { geolocation },\n    snapMap: { snaps }\n  } = useSelector(({ user, snapMap }: RootStateOrAny) => ({ user, snapMap }));\n\n  const mapElem = useRef<HTMLDivElement>(null);\n  const [loading, setLoading] = useState(true);\n  const [map, setMap] = useState<Map | null>(null);\n\n  const { latitude, longitude, city, state } = geolocation;\n\n  useEffect(() => {\n    dispatch(\n      getSnaps({\n        lat: latitude,\n        lon: longitude,\n        city,\n        state\n      })\n    );\n    dispatch(\n      getWeather({\n        lat: latitude,\n        lon: longitude\n      })\n    );\n    loadMap();\n  }, []);\n\n  // Add self marker on map after map has loaded\n  useEffect(() => {\n    if (map) {\n      addSelfMarkerToMap();\n      // Zoom in effect on load\n      setTimeout(() => map.flyTo({ zoom: 14 }), 2000);\n    }\n  }, [map]);\n\n  // Add snaps on map after snaps have loaded\n  useEffect(() => {\n    snaps.forEach((snap: Snap) => addSnapToMap(snap));\n  }, [snaps]);\n\n  const loadMap = () => {\n    if (mapElem.current) {\n      const map = new mapboxgl.Map({\n        container: mapElem.current,\n        style: 'mapbox://styles/mapbox/streets-v11',\n        center: [longitude, latitude],\n        zoom: 13\n      }).on('load', () => setLoading(false));\n\n      setMap(map);\n    }\n  };\n\n  const addSelfMarkerToMap = () => {\n    if (!map) return;\n\n    const tooltip = document.createElement('div');\n    tooltip.classList.add('self-marker');\n\n    const marker = new mapboxgl.Marker(tooltip).setLngLat([longitude, latitude]);\n\n    marker.addTo(map);\n\n    setTimeout(() => {\n      tooltip.classList.add('zoomed-in');\n\n      const popup = new mapboxgl.Popup({\n        closeOnClick: false\n      })\n        .setLngLat([longitude, latitude])\n        .setHTML(\n          `<header>Me</header>\n            <p>Not Sharing Location</p>`\n        );\n\n      popup.addTo(map);\n    }, 2300);\n  };\n\n  const addSnapToMap = (snap: Snap) => {\n    const { lat, lon } = snap;\n\n    const marker = document.createElement('a');\n    marker.classList.add('marker');\n    marker.setAttribute('data-test', 'marker');\n    marker.addEventListener('click', (e: MouseEvent) => {\n      e.preventDefault();\n\n      const elem = e.currentTarget as HTMLButtonElement;\n\n      // Show pulse animation\n      elem.classList.add('active');\n\n      // Delay opening the drawer so we can see the pulse\n      onAnimationComplete(() => {\n        dispatch(addSnap(snap));\n        dispatch(\n          showDrawer({\n            component: 'snap',\n            animationIn: 'zoomIn',\n            animationOut: 'zoomOut',\n            theme: 'dark'\n          })\n        );\n      }, 900);\n\n      // Remove pulse\n      onAnimationComplete(() => elem.classList.remove('active'), 1000);\n    });\n\n    if (lat && lon) {\n      const snap = new mapboxgl.Marker(marker).setLngLat([lon, lat]);\n      snap.addTo(map as Map);\n    }\n  };\n\n  return (\n    <div className=\"snap-map\">\n      <div className=\"inner\">\n        {loading && <Loader />}\n        <Header />\n        <div ref={mapElem} className=\"content\" />\n      </div>\n    </div>\n  );\n};\n\nexport default SnapMap;\n","import React, { useEffect, useRef } from 'react';\nimport { useSelector, useDispatch, RootStateOrAny } from 'react-redux';\nimport classNames from 'classnames';\nimport { hideDrawer } from 'AppShell/AppShellStore';\nimport { removeSnap } from './SnapStore';\nimport { onAnimationComplete, relativeTime } from 'utils';\nimport Button from 'components/Button/Button';\nimport './Snap.scss';\n\nconst Snap: React.FC = () => {\n  const dispatch = useDispatch();\n  const snap = useSelector(({ snap }: RootStateOrAny) => snap);\n  const videoElem = useRef<HTMLVideoElement>(null);\n\n  const { location, time, type, url, caption, shareable } = snap;\n\n  useEffect(() => {\n    if (type === 'video' && videoElem.current) {\n      videoElem.current.load();\n      videoElem.current.play();\n    }\n  }, [snap, type]);\n\n  const closeSnap = () => {\n    dispatch(hideDrawer('snap'));\n    onAnimationComplete(() => dispatch(removeSnap()));\n  };\n\n  const hasLocationTime = location || time;\n\n  return (\n    <main className=\"snap\" onClick={closeSnap} data-test=\"snap\">\n      <header\n        className={classNames({\n          metadata: hasLocationTime\n        })}\n      >\n        {hasLocationTime && (\n          <div className=\"left\">\n            {location && <span data-test=\"location\">{location}</span>}\n            {time && <time data-test=\"time\">{relativeTime(time)}</time>}\n          </div>\n        )}\n        <div className=\"right\">\n          <Button icon=\"faEllipsisV\" />\n        </div>\n      </header>\n\n      {type === 'video' ? (\n        <div className=\"video-container\">\n          <video ref={videoElem} playsInline onEnded={closeSnap} data-test=\"video\">\n            <source src={url} type=\"video/mp4\" />\n          </video>\n        </div>\n      ) : (\n        <div className=\"image-container\" data-test=\"image\">\n          {caption && (\n            <div className=\"caption\" data-test=\"caption\">\n              {caption}\n            </div>\n          )}\n          <img src={url} alt=\"\" />\n        </div>\n      )}\n\n      {shareable && (\n        <footer>\n          <Button icon=\"faLocationArrow\" />\n        </footer>\n      )}\n    </main>\n  );\n};\n\nexport default Snap;\n","export const relativeTime = (timestamp: number): string => {\n  const msPerMinute = 60 * 1000;\n  const msPerHour = msPerMinute * 60;\n  const msPerDay = msPerHour * 24;\n  const msPerMonth = msPerDay * 30;\n  const msPerYear = msPerDay * 365;\n\n  const elapsed = Date.now() - timestamp;\n\n  if (elapsed < msPerMinute) {\n    return Math.floor(elapsed / 1000) + ' seconds ago';\n  } else if (elapsed < msPerHour) {\n    return Math.floor(elapsed / msPerMinute) + ' minutes ago';\n  } else if (elapsed < msPerDay) {\n    return Math.floor(elapsed / msPerHour) + ' hours ago';\n  } else if (elapsed < msPerMonth) {\n    return Math.floor(elapsed / msPerDay) + ' days ago';\n  } else if (elapsed < msPerYear) {\n    return Math.floor(elapsed / msPerMonth) + ' months ago';\n  } else {\n    return Math.floor(elapsed / msPerYear) + ' years ago';\n  }\n};\n","import React from 'react';\nimport { useSelector, useDispatch, RootStateOrAny } from 'react-redux';\nimport { showDrawer } from 'AppShell/AppShellStore';\nimport { addSnap } from 'features/Snap/SnapStore';\nimport { Photo } from 'features/Camera/data';\nimport Header from 'components/Header/Header';\nimport Button from 'components/Button/Button';\nimport Loader from 'components/Loader/Loader';\nimport Error from 'components/Error/Error';\nimport './Archive.scss';\n\nconst Archive: React.FC = () => {\n  const dispatch = useDispatch();\n  const { photos, photoTaken } = useSelector(({ camera }: RootStateOrAny) => camera);\n\n  const openPhoto = (image: string) => {\n    dispatch(\n      addSnap({\n        type: 'photo',\n        url: image,\n        shareable: true\n      })\n    );\n    dispatch(\n      showDrawer({\n        component: 'snap',\n        animationIn: 'zoomIn',\n        animationOut: 'zoomOut',\n        theme: 'dark'\n      })\n    );\n  };\n\n  return (\n    <main className=\"archive\">\n      <Header insideDrawer />\n\n      {photos.loading ? (\n        <Loader nobg />\n      ) : photos.error ? (\n        <Error />\n      ) : (\n        <>\n          <nav className=\"view-options\">\n            <Button label=\"Snaps\" className=\"active\" />\n            <Button label=\"Camera Roll\" />\n          </nav>\n\n          {!photoTaken && (\n            <section className=\"message\" data-test=\"placeholder-msg\">\n              <p>Take a photo and it will appear here!</p>\n            </section>\n          )}\n\n          {photos.data.map(({ month, year, images }: Photo, index: number) => (\n            <section key={month + index} className=\"month\" data-test=\"month\">\n              <h3>\n                {month} {year}\n              </h3>\n              {images.map((image, index) => (\n                <img\n                  key={image + index}\n                  src={image}\n                  width={100}\n                  alt=\"\"\n                  onClick={() => openPhoto(image)}\n                  data-test=\"snap-image\"\n                />\n              ))}\n            </section>\n          ))}\n        </>\n      )}\n    </main>\n  );\n};\n\nexport default Archive;\n","export type Message = {\n  id: string;\n  author: string;\n  message: string;\n  time: string;\n};\n\nexport const dummyMessages = [\n  \"Oh wow I can't believe it!\",\n  \"Hahaha you're so right!!\",\n  'No way, when?!! 😱',\n  'OMG I totally agree!',\n  \"Umm I'm not so sure about that one 🤨\",\n  'Wait, you are actually being serious rn?',\n  \"Hahahahaha you're too much 😂😂😂\",\n  'Did you watch the new show last night?',\n  '🤡'\n];\n","import React from 'react';\nimport Button from 'components/Button/Button';\nimport './Pill.scss';\n\nconst Pill: React.FC<\n  Readonly<{\n    icons: string[];\n  }>\n> = ({ icons }) => (\n  <div className=\"pill\">\n    {icons.map((icon) => (\n      <Button key={icon} icon={icon} />\n    ))}\n  </div>\n);\n\nexport default Pill;\n","import React, { useEffect, useLayoutEffect, useState, useRef } from 'react';\nimport { useSelector, useDispatch, RootStateOrAny } from 'react-redux';\nimport classNames from 'classnames';\nimport { hideDrawer } from 'AppShell/AppShellStore';\nimport { getMessages, postMessage } from './ChatStore';\nimport { Message, dummyMessages } from './data';\nimport { randomArrayVal, playSound, sleep } from 'utils';\nimport Input from 'components/Input/Input';\nimport Avatar from 'components/Avatar/Avatar';\nimport Pill from 'components/Pill/Pill';\nimport Button from 'components/Button/Button';\nimport Loader from 'components/Loader/Loader';\nimport Error from 'components/Error/Error';\nimport './Chat.scss';\n\nconst Chat: React.FC = () => {\n  const dispatch = useDispatch();\n  const {\n    user: {\n      session: { username }\n    },\n    chat: { thread, messages }\n  } = useSelector(({ user, chat }: RootStateOrAny) => ({ user, chat }));\n\n  const messageContainer = useRef<HTMLElement>(null);\n  const audioElem = useRef<HTMLAudioElement>(null);\n\n  const [message, setMessage] = useState('');\n  const [typing, setTyping] = useState(false);\n\n  useEffect(() => {\n    dispatch(getMessages(thread));\n    botResponse(true);\n  }, []);\n\n  useLayoutEffect(() => {\n    // Scroll to bottom of container on load and each time a new message is posted\n    if (messageContainer.current) {\n      messageContainer.current.scrollTop = messageContainer.current.scrollHeight;\n    }\n  }, [messages]);\n\n  const botResponse = async (firstMsg = false) => {\n    // Pretend to type for a bit...\n    const typeAndStop = firstMsg ? [1000, 0] : [800, 500, 1000, 700, 600, 0];\n\n    for (let i = 0; i < typeAndStop.length; i++) {\n      setTyping((prevTyping) => !prevTyping);\n      await sleep(typeAndStop[i]);\n      continue;\n    }\n\n    const message = firstMsg ? 'Soooo, how was it!?' : randomArrayVal(dummyMessages);\n    dispatch(postMessage(thread, message));\n\n    if (audioElem.current) {\n      playSound('newAppMessage', audioElem.current);\n    }\n  };\n\n  const submitMessage = () => {\n    if (message.length) {\n      dispatch(postMessage(username, message));\n      setMessage('');\n      setTimeout(botResponse, 1000);\n    }\n  };\n\n  return (\n    <main className=\"chat\">\n      <header>\n        <Avatar src=\"./images/bitmoji-other.png\" />\n        <h2>{thread}</h2>\n        <div className=\"right\">\n          <Pill icons={['faPhoneAlt', 'faVideo']} />\n          <Button\n            icon=\"faAngleRight\"\n            onClick={() => dispatch(hideDrawer('chat'))}\n            className=\"btn-arrow\"\n            testId=\"btn-close-chat\"\n          />\n        </div>\n      </header>\n\n      <section ref={messageContainer} className=\"messages\">\n        {messages.loading ? (\n          <Loader nobg />\n        ) : messages.error ? (\n          <Error />\n        ) : (\n          messages.data.map(({ author, message, time }: Message) => (\n            <article\n              key={time}\n              className={classNames('message', {\n                other: author !== username\n              })}\n              data-test=\"message\"\n            >\n              <header>{author !== username ? author : 'Me'}</header>\n              <blockquote>{message}</blockquote>\n            </article>\n          ))\n        )}\n      </section>\n\n      <footer>\n        <div className={classNames('gravatar', { typing })}>\n          <Avatar src=\"./images/bitmoji-other.png\" />\n        </div>\n        <div className=\"inner-content\">\n          <Button icon=\"faCamera\" className=\"btn-camera\" round />\n          <Input\n            placeholder=\"Send a chat\"\n            rightIcon=\"faMicrophone\"\n            onChange={(e: React.SyntheticEvent<HTMLInputElement>) =>\n              setMessage(e.currentTarget.value)\n            }\n            onEnter={submitMessage}\n            onBlur={submitMessage}\n            value={message}\n          />\n          <div className=\"right\">\n            <Button icon=\"faSmileWink\" />\n            <Button icons={['faMobile', 'faMobileAlt']} className=\"btn-archive\" />\n            <Button icon=\"faRocket\" />\n          </div>\n        </div>\n      </footer>\n\n      <audio ref={audioElem} className=\"app-sound\" />\n    </main>\n  );\n};\n\nexport default Chat;\n","import React from 'react';\nimport './SkeletonFrame.scss';\n\nconst SkeletonFrame: React.FC<\n  Readonly<{\n    count?: number;\n  }>\n> = ({ count = 1 }) => (\n  <>\n    {new Array(count).fill(null).map((val, index) => (\n      <article key={`frame-${index}`} className=\"skeleton-frame\" />\n    ))}\n  </>\n);\n\nexport default SkeletonFrame;\n","import React from 'react';\nimport './Card.scss';\n\nconst Card: React.FC<\n  Readonly<{\n    title: string;\n    image: string;\n    testId?: string;\n  }>\n> = ({ title, image, testId }) => (\n  <article className=\"card\" data-test={testId}>\n    <img src={image} alt=\"\" />\n    <div className=\"meta\">\n      <header>{title}</header>\n    </div>\n  </article>\n);\n\nexport default Card;\n","import React, { useEffect, useState, useRef, RefObject } from 'react';\nimport { api, sleep, debounce, elemInView } from 'utils';\nimport Header from 'components/Header/Header';\nimport Section from 'components/Section/Section';\nimport Button from 'components/Button/Button';\nimport SkeletonFrame from 'components/SkeletonFrame/SkeletonFrame';\nimport Card from 'components/Card/Card';\nimport './Discover.scss';\n\ntype Profile = {\n  image: string;\n  title: string;\n};\n\nconst Discover: React.FC<\n  Readonly<{\n    drawerContent: RefObject<HTMLElement>;\n  }>\n> = ({ drawerContent }) => {\n  const loadMore = useRef<HTMLDivElement>(null);\n  const isFetching = useRef(false);\n\n  const [page, setPage] = useState(1);\n  const [profiles, setProfiles] = useState<Profile[]>([]);\n\n  useEffect(() => {\n    drawerContent.current?.addEventListener('scroll', onScroll.current);\n  }, []);\n\n  // Infinite scroll\n  useEffect(() => {\n    loadPage();\n  }, [page]);\n\n  const onScroll = useRef(\n    debounce(() => {\n      if (!isFetching.current && elemInView(loadMore)) {\n        setPage((prevPage) => prevPage + 1);\n      }\n    }, 10)\n  );\n\n  const loadPage = async () => {\n    isFetching.current = true;\n\n    const [error, response] = await api.get(`/discover/page/${page}.json`);\n\n    if (!error) {\n      // Simulate slow API response on the first call to show off skeleton frames\n      if (page === 1) await sleep(1000);\n\n      setProfiles((prevProfiles) => {\n        return [...prevProfiles, ...response.discover];\n      });\n\n      isFetching.current = false;\n    }\n\n    if (page === 3) {\n      drawerContent.current?.removeEventListener('scroll', onScroll.current);\n    }\n  };\n\n  return (\n    <main className=\"discover\">\n      <Header insideDrawer />\n\n      <section className=\"view\">\n        <Section className=\"friends\" header=\"Friends\" transparent>\n          <p>Stories from your friends will appear here.</p>\n          <Button label=\"Add Friends\" purple />\n        </Section>\n        <Section header=\"For You\" transparent>\n          <div className=\"inner\">\n            {profiles.length ? (\n              profiles.map(({ image, title }) => (\n                <Card key={image} image={image} title={title} testId=\"discover-item\" />\n              ))\n            ) : (\n              <SkeletonFrame count={10} />\n            )}\n          </div>\n        </Section>\n\n        <div ref={loadMore} className=\"load-more\" />\n      </section>\n    </main>\n  );\n};\n\nexport default Discover;\n","import { RefObject } from 'react';\n\nexport const stretchViewPortHeight = (elem = document.documentElement) => {\n  const viewportHeight = window.innerHeight * 0.01;\n  elem.style.setProperty('--vh', viewportHeight + 'px');\n};\n\nexport const elemInView = (\n  elem: RefObject<HTMLElement>,\n  fullyVisible = false\n): boolean => {\n  if (!elem.current) return false;\n  const position = elem.current.getBoundingClientRect();\n  const elemTop = position.top;\n  const elemBottom = position.bottom;\n  const isVisible = fullyVisible\n    ? elemTop >= 0 && elemBottom <= window.innerHeight\n    : elemTop < window.innerHeight && elemBottom >= 0;\n  return isVisible;\n};\n\nexport const getDeviceWidth = (): number => {\n  const wrapper = document.querySelector('#wrapper') as HTMLDivElement;\n  return wrapper.offsetWidth;\n};\n","import React, { useRef, ReactElement } from 'react';\nimport { useSelector, RootStateOrAny } from 'react-redux';\nimport { Animated } from 'react-animated-css';\nimport { onAnimationComplete } from 'utils';\nimport { AnimationType, Drawer as DrawerT, DrawerComponent } from '../data';\nimport Account from 'features/Account/Account';\nimport Search from 'features/Search/Search';\nimport SnapMap from 'features/SnapMap/SnapMap';\nimport Snap from 'features/Snap/Snap';\nimport Archive from 'features/Archive/Archive';\nimport Chat from 'features/Chat/Chat';\nimport Discover from 'features/Discover/Discover';\nimport './Drawer.scss';\n\nconst Drawer: React.FC = () => {\n  const { drawers } = useSelector(({ app }: RootStateOrAny) => app);\n  const drawerContent = useRef<HTMLElement>(null);\n\n  const getComponent = (component: DrawerComponent, show: boolean): ReactElement => {\n    const componentMap: Record<DrawerComponent, ReactElement> = {\n      account: <Account />,\n      search: <Search show={show} />,\n      snapMap: <SnapMap />,\n      snap: <Snap />,\n      archive: <Archive />,\n      chat: <Chat />,\n      discover: <Discover drawerContent={drawerContent} />\n    };\n    return componentMap[component];\n  };\n\n  return (\n    <>\n      {drawers &&\n        drawers.map(\n          ({\n            component,\n            animationIn,\n            animationOut,\n            animationInDuration,\n            animationOutDuration,\n            show = false,\n            theme,\n            position\n          }: DrawerT) => {\n            const elem = document.getElementById(component);\n            if (show) {\n              elem?.classList.remove('collapse');\n            } else {\n              onAnimationComplete(\n                () => elem?.classList.add('collapse'),\n                animationOutDuration\n              );\n            }\n\n            return (\n              <aside\n                id={component}\n                key={component}\n                className={`drawer ${theme} ${position}`}\n              >\n                <div className=\"view\" data-test={`${component}-drawer`}>\n                  <Animated\n                    animationIn={animationIn as AnimationType}\n                    animationOut={animationOut as AnimationType}\n                    animationInDuration={animationInDuration}\n                    animationOutDuration={animationOutDuration}\n                    isVisible={show}\n                  >\n                    <section\n                      ref={drawerContent}\n                      className=\"content\"\n                      data-test=\"drawer-content\"\n                      style={{ height: window.innerHeight + 'px' }}\n                    >\n                      {getComponent(component, show)}\n                    </section>\n                  </Animated>\n                </div>\n              </aside>\n            );\n          }\n        )}\n    </>\n  );\n};\n\nexport default Drawer;\n","import React from 'react';\nimport { useSelector, useDispatch, RootStateOrAny } from 'react-redux';\nimport classNames from 'classnames';\nimport { Animated } from 'react-animated-css';\nimport { showDrawer, hideAllDrawers, setFooterType } from 'AppShell/AppShellStore';\nimport { atleastOneDrawerOpen } from '../data';\nimport Button from 'components/Button/Button';\nimport './Footer.scss';\n\nconst Footer: React.FC = () => {\n  const dispatch = useDispatch();\n  const { drawers, footerType } = useSelector(({ app }: RootStateOrAny) => app);\n\n  return (\n    <>\n      {footerType !== 'none' && (\n        <footer\n          className={classNames('footer', {\n            'light-shadow': atleastOneDrawerOpen(drawers)\n          })}\n        >\n          <div className=\"left\">\n            <Button\n              icons={['faCommentAlt', 'faDot']}\n              iconClasses={['', 'new-msg']}\n              className=\"btn-chat\"\n              testId=\"btn-chat\"\n              label=\"Chat\"\n              onClick={() =>\n                dispatch(\n                  showDrawer({\n                    component: 'chat',\n                    animationIn: 'slideInLeft',\n                    animationOut: 'slideOutLeft',\n                    theme: 'stripped'\n                  })\n                )\n              }\n            />\n          </div>\n          <div className=\"center\">\n            <Animated\n              animationIn=\"zoomIn\"\n              animationOut=\"zoomOut\"\n              animationInDuration={500}\n              animationOutDuration={500}\n              isVisible={footerType === 'collapsed'}\n              animateOnMount={false}\n            >\n              <Button\n                icon=\"faCircle\"\n                className=\"btn-capture\"\n                testId=\"btn-capture-footer\"\n                onClick={() => {\n                  dispatch(setFooterType('full'));\n                  dispatch(hideAllDrawers());\n                }}\n              />\n            </Animated>\n            <Animated\n              animationIn=\"zoomIn\"\n              animationOut=\"zoomOut\"\n              animationInDuration={500}\n              animationOutDuration={500}\n              isVisible={footerType === 'full'}\n              animateOnMount={false}\n            >\n              <Button\n                icons={['faMobile', 'faMobileAlt']}\n                className=\"btn-archive\"\n                testId=\"btn-archive\"\n                onClick={() => {\n                  dispatch(setFooterType('collapsed'));\n                  dispatch(\n                    showDrawer({\n                      component: 'archive',\n                      animationIn: 'slideInUp',\n                      animationOut: 'slideOutDown',\n                      position: 'back'\n                    })\n                  );\n                }}\n              />\n            </Animated>\n          </div>\n          <div className=\"right\">\n            <Button\n              icons={['faMobile', 'faMobile']}\n              className=\"btn-discover\"\n              testId=\"btn-discover\"\n              label=\"Discover\"\n              onClick={() => {\n                dispatch(setFooterType('collapsed'));\n                dispatch(\n                  showDrawer({\n                    component: 'discover',\n                    animationIn: 'slideInRight',\n                    animationOut: 'slideOutRight',\n                    position: 'back'\n                  })\n                );\n              }}\n            />\n          </div>\n        </footer>\n      )}\n    </>\n  );\n};\n\nexport default Footer;\n","import React, { useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { getSession, getFriends } from 'features/User/UserStore';\nimport { getPhotos } from 'features/Camera/CameraStore';\nimport Header from 'components/Header/Header';\nimport Toolbar from './Toolbar/Toolbar';\nimport Drawer from './Drawer/Drawer';\nimport Footer from './Footer/Footer';\n\nconst AppShell: React.FC = ({ children }) => {\n  const dispatch = useDispatch();\n\n  // Init the app\n  useEffect(() => {\n    dispatch(getSession());\n    dispatch(getFriends());\n    dispatch(getPhotos());\n  }, []);\n\n  return (\n    <>\n      <Toolbar />\n      <Header />\n      <section className=\"view\">{children}</section>\n      <Drawer />\n      <Footer />\n    </>\n  );\n};\n\nexport default AppShell;\n","import React, { useRef, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { useDispatch, useSelector, RootStateOrAny } from 'react-redux';\nimport { setPhoto } from '../CameraStore';\nimport { stretchViewPortHeight, canvasToBase64, base64ToBlob, downloadFile } from 'utils';\nimport { GENERIC_ERROR_RETRY } from 'utils/system';\nimport Button from 'components/Button/Button';\nimport './PhotoCapture.scss';\n\nconst buttons = [\n  'faTextHeight',\n  'faPen',\n  'faStickyNote',\n  'faCut',\n  'faPaperclip',\n  'faCropAlt',\n  'faStopwatch'\n];\n\nconst PhotoCapture: React.FC<\n  Readonly<{\n    takePic: boolean;\n    closePic: () => void;\n    videoElem: HTMLVideoElement;\n  }>\n> = ({ takePic, closePic, videoElem }) => {\n  const dispatch = useDispatch();\n\n  const { photos } = useSelector(({ camera }: RootStateOrAny) => camera);\n  const latestPhoto = photos.data.length ? photos.data[0].images[0] : null;\n\n  const canvasElem = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    stretchViewPortHeight();\n  }, []);\n\n  useEffect(() => {\n    if (takePic) {\n      takePhoto();\n\n      if (canvasElem.current) {\n        const base64url = canvasToBase64(canvasElem.current, 'image/png');\n        dispatch(setPhoto(base64url));\n      }\n    }\n  }, [takePic]);\n\n  const takePhoto = () => {\n    const { innerWidth, innerHeight } = window;\n    const context = canvasElem.current?.getContext('2d');\n\n    if (context) {\n      context.canvas.width = innerWidth;\n      context.canvas.height = innerHeight;\n      context.drawImage(videoElem, 0, 0, innerWidth, innerHeight);\n    }\n  };\n\n  const sharePhoto = async () => {\n    const navigator = window.navigator as any;\n    const errorMessage = \"Your device doesn't support the Web Share API.\";\n\n    if (!navigator.share || !navigator.canShare) return alert(errorMessage);\n\n    const blob = await base64ToBlob(latestPhoto);\n    const files = [\n      new File([blob], 'share.png', {\n        type: blob.type\n      })\n    ];\n\n    if (!navigator.canShare({ files })) return alert(errorMessage);\n\n    try {\n      navigator.share({\n        title: 'Share',\n        text: 'Hey, check out this photo I just took!',\n        url: window.location.href,\n        files\n      });\n    } catch (error) {\n      alert(GENERIC_ERROR_RETRY);\n    }\n  };\n\n  return (\n    <section\n      data-test=\"photo-capture\"\n      className={classNames('photo-capture', {\n        hide: !takePic\n      })}\n    >\n      <div className=\"inner\">\n        <header>\n          <Button icon=\"faTimes\" onClick={closePic} testId=\"btn-close\" />\n        </header>\n        <canvas ref={canvasElem} />\n        <aside>\n          {buttons.map((button) => (\n            <Button key={button} icon={button} />\n          ))}\n        </aside>\n        <footer>\n          <div className=\"left\">\n            <Button\n              icon=\"faDownload\"\n              label=\"Save\"\n              className=\"btn-download\"\n              onClick={() => downloadFile(latestPhoto)}\n            />\n            <Button icon=\"faExternalLinkAlt\" label=\"Story\" />\n          </div>\n          <div className=\"right\">\n            <Button\n              icon=\"faPlayCircle\"\n              label=\"Send To\"\n              className=\"btn-share\"\n              onClick={sharePhoto}\n            />\n          </div>\n        </footer>\n      </div>\n    </section>\n  );\n};\n\nexport default PhotoCapture;\n","import React from 'react';\n\nexport const Deform: React.FC = () => (\n  <svg height=\"512\" viewBox=\"0 0 64 64\" width=\"512\" xmlns=\"http://www.w3.org/2000/svg\">\n    <title>Deform filter</title>\n    <circle cx=\"14\" cy=\"10\" fill=\"#c7e2fc\" r=\"8\" />\n    <circle cx=\"32\" cy=\"32\" fill=\"#c7e2fc\" r=\"17\" />\n    <path\n      d=\"M48 26c5.523 0 10-4.477 10-10S53.523 6 48 6s-10 4.477-10 10v.089A17.052 17.052 0 0 1 47.911 26zM46 31.999h-2c0-6.617-5.383-12-12-12v-2c7.719.001 14 6.281 14 14z\"\n      fill=\"#ebf7fe\"\n    />\n    <circle cx=\"54\" cy=\"54\" fill=\"#ebf7fe\" r=\"8\" />\n    <path\n      d=\"M58.999 53.999h-2c0-1.654-1.346-3-3-3v-2c2.757.001 5 2.243 5 5z\"\n      fill=\"#c7e2fc\"\n    />\n    <path\n      d=\"M19 9.999h-2c0-1.654-1.346-3-3-3V5c2.757 0 5 2.242 5 4.999z\"\n      fill=\"#ebf7fe\"\n    />\n    <path\n      d=\"M54.999 15.999h-2c0-2.757-2.243-5-5-5V9c3.86 0 7 3.14 7 6.999z\"\n      fill=\"#c7e2fc\"\n    />\n    <circle cx=\"15\" cy=\"58\" fill=\"#c7e2fc\" r=\"4\" />\n    <circle cx=\"6\" cy=\"40\" fill=\"#c7e2fc\" r=\"4\" />\n    <g fill=\"#ebf7fe\">\n      <circle cx=\"9\" cy=\"28\" r=\"4\" />\n      <circle cx=\"56\" cy=\"35\" r=\"3\" />\n      <circle cx=\"35\" cy=\"55\" r=\"3\" />\n      <circle cx=\"32\" cy=\"8\" r=\"2\" />\n      <circle cx=\"14\" cy=\"49\" r=\"2\" />\n    </g>\n    <path d=\"M49.258 26.921c5.474-.627 9.741-5.283 9.741-10.922 0-6.065-4.935-11-11-11-5.639 0-10.295 4.267-10.922 9.741A17.961 17.961 0 0 0 32 14c-9.925 0-18 8.075-18 18s8.075 18 18 18 18-8.075 18-18a17.976 17.976 0 0 0-.742-5.079zM48 7c4.962 0 9 4.037 9 9 0 4.771-3.734 8.675-8.431 8.971a18.103 18.103 0 0 0-9.54-9.54C39.324 10.733 43.229 7 48 7zM32 47.999c-8.823 0-16-7.177-16-16s7.177-16 16-16c8.822 0 16 7.177 16 16-.001 8.823-7.178 16-16 16z\" />\n    <path d=\"M32 18v2c6.617 0 12 5.383 12 12h2c-.001-7.72-6.281-14-14-14zM54 45c-4.963 0-9 4.037-9 9 0 4.962 4.037 9 9 9 4.962 0 9-4.037 9-9-.001-4.963-4.038-9-9-9zm0 15.999c-3.86 0-7-3.14-7-7s3.14-7 7-7c3.859 0 7 3.14 7 7-.001 3.86-3.141 7-7 7z\" />\n    <path d=\"M54 49v2c1.654 0 3 1.346 3 3h2a5.006 5.006 0 0 0-5-5zM16.999 9.999h2c0-2.757-2.243-5-5-5v2c1.654.001 3 1.346 3 3z\" />\n    <path d=\"M14 18.999c4.962 0 9-4.037 9-9s-4.037-9-9-9-9 4.037-9 9 4.037 9 9 9zM14 3c3.859 0 7 3.14 7 7 0 3.859-3.14 7-7 7s-7-3.14-7-7 3.14-7 7-7zM52.999 15.999h2c0-3.859-3.14-7-7-7v2c2.757.001 5 2.243 5 5zM15 53c-2.757 0-5 2.243-5 5s2.243 5 5 5 5-2.243 5-5a5.006 5.006 0 0 0-5-5zm0 7.999c-1.654 0-3-1.346-3-3s1.346-3 3-3 3 1.346 3 3a3.005 3.005 0 0 1-3 3zM6 35c-2.757 0-5 2.243-5 5s2.243 5 5 5 5-2.243 5-5a5.006 5.006 0 0 0-5-5zm0 7.999c-1.654 0-3-1.346-3-3s1.345-3 3-3c1.654 0 3 1.346 3 3a3.005 3.005 0 0 1-3 3zM9 32.999c2.757 0 5-2.243 5-5s-2.243-5-5-5-5 2.243-5 5 2.242 5 5 5zM9 25c1.654 0 3 1.346 3 3s-1.346 3-3 3-3-1.346-3-3c0-1.655 1.345-3 3-3zM56 31c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4a4.005 4.005 0 0 0-4-4zm0 5.999c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2a2.003 2.003 0 0 1-2 2zM35 51c-2.206 0-4 1.794-4 4s1.794 4 4 4 4-1.794 4-4a4.005 4.005 0 0 0-4-4zm0 5.999c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2a2.003 2.003 0 0 1-2 2zM32 10.999c1.654 0 3-1.346 3-3s-1.346-3-3-3-3 1.346-3 3 1.345 3 3 3zM32 7a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2zM11 49c0 1.654 1.346 3 3 3s3-1.346 3-3-1.346-3-3-3c-1.655 0-3 1.345-3 3zm3-1a1.001 1.001 0 0 1 0 2 1 1 0 0 1 0-2z\" />\n  </svg>\n);\n","import React from 'react';\n\nexport const Dog: React.FC = () => (\n  <svg\n    height=\"512\"\n    viewBox=\"0 0 512.041 512.041\"\n    width=\"512\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <title>Dog filter</title>\n    <path\n      d=\"M189.761 53.171c-6.98-6.99-16.95-9.31-28.74-9.14-27.76.4-65.64 18.67-98.54 51.56-46.86 46.87-65.86 103.85-42.42 127.28 15.19 15.2 44.51 12.55 76.02-3.99l102.15-150.6v-.01c-1.58-5.9-4.38-11.01-8.47-15.1z\"\n      fill=\"#766e6e\"\n    />\n    <path\n      d=\"M449.561 95.591c-33.29-33.29-71.69-51.62-99.54-51.57-11.35.02-20.96 2.36-27.74 9.15-4.09 4.09-6.89 9.2-8.47 15.1v.01c-18.35-12.83-37.81-20.26-57.79-20.26s-39.44 7.43-57.79 20.26c-73.641 51.454-128.21 188.108-128.21 279.74 0 115.98 86.59 120 186 120s186-4.02 186-120c0-42.154-11.3-89.312-26.03-129.04l.07-.03c31.47 16.48 60.74 19.1 75.92 3.92 23.44-23.43 4.44-80.41-42.42-127.28z\"\n      fill=\"#ffb95c\"\n    />\n    <g fill=\"#766e6e\">\n      <path d=\"M435.641 288.021h-89.62c-49.71 0-90-40.29-90-90v-150c85.546 0 158.731 133.818 179.62 240zM286.021 333.021v4.64c0 8.5-3.61 16.61-9.93 22.3l-20.07 18.06-20.07-18.06a30.015 30.015 0 0 1-9.93-22.3v-4.64c16.57-16.57 43.43-16.57 60 0z\" />\n    </g>\n    <g>\n      <circle cx=\"316.021\" cy=\"228.021\" r=\"10\" />\n      <circle cx=\"196.021\" cy=\"228.021\" r=\"10\" />\n      <path d=\"M316.021 398.021h-30c-9.631 0-17.692-6.844-19.58-15.924l16.341-14.704a40.065 40.065 0 0 0 13.239-29.732v-4.64c0-2.652-1.054-5.196-2.929-7.071-20.441-20.44-53.701-20.44-74.143 0a10.001 10.001 0 0 0-2.929 7.071v4.64a40.067 40.067 0 0 0 13.241 29.733l16.339 14.703c-1.888 9.079-9.949 15.924-19.58 15.924h-30c-5.523 0-10 4.477-10 10s4.477 10 10 10h30c11.938 0 22.665-5.264 30-13.585 7.335 8.321 18.062 13.585 30 13.585h30c5.523 0 10-4.477 10-10s-4.476-10-9.999-10zm-80-60.36v-.167c11.698-9.179 28.302-9.179 40 0v.167c0 5.661-2.413 11.08-6.619 14.866l-13.381 12.041-13.379-12.04a20.032 20.032 0 0 1-6.621-14.867z\" />\n      <path d=\"M456.632 88.519C423.004 54.891 382.213 34.02 350.135 34.02h-.132c-15.323.028-26.706 3.98-34.794 12.08-2.247 2.248-4.195 4.75-5.871 7.463-17.654-10.308-35.543-15.542-53.317-15.542-17.775 0-35.664 5.235-53.317 15.542-1.675-2.713-3.622-5.213-5.867-7.459-8.341-8.353-20.115-12.314-35.96-12.073-31.895.46-72.307 21.339-105.468 54.489-23.741 23.747-41.494 50.857-49.987 76.338-9.274 27.821-6.585 50.936 7.566 65.081 16.896 16.907 43.669 14.929 66.272 7.156-12.46 39.185-19.239 77.902-19.239 110.926 0 56.912 20.143 93.742 61.58 112.595 35.377 16.096 81.807 17.405 134.42 17.405s99.042-1.31 134.42-17.405c41.437-18.853 61.58-55.683 61.58-112.595 0-29.547-5.536-67.868-19.236-110.914 22.664 7.785 49.399 9.702 66.265-7.163 14.155-14.149 16.843-37.264 7.569-65.085-8.493-25.482-26.245-52.592-49.987-76.34zM27.131 215.798c-8.393-8.389-9.39-24.651-2.735-44.615 7.531-22.593 23.568-46.928 45.155-68.52 29.171-29.162 65.131-48.251 91.614-48.633 10.303-.147 17.143 1.824 21.525 6.212a21.126 21.126 0 0 1 3.436 4.554c-38.17 29.503-73.496 82.372-98.024 146.924-26.938 13.334-50.102 14.955-60.971 4.078zm355.028 226.613c-31.728 14.436-75.897 15.61-126.138 15.61s-94.41-1.174-126.138-15.61c-34.018-15.477-49.862-45.47-49.862-94.39 0-108.473 78.458-277.013 166-289.288v34.286c0 5.523 4.477 10 10 10s10-4.477 10-10V58.733c77.282 10.836 138.145 135.73 157.247 219.288h-77.247c-44.112 0-80-35.888-80-80V183.02c0-5.523-4.477-10-10-10s-10 4.477-10 10v15.001c0 55.14 44.86 100 100 100h81.305c3.115 17.831 4.695 34.619 4.695 50 0 48.92-15.844 78.913-49.862 94.39zM484.91 215.8c-10.868 10.868-34.038 9.256-60.969-4.063-24.515-64.551-59.841-117.425-98.025-146.941a21.137 21.137 0 0 1 3.441-4.559c4.217-4.223 10.789-6.198 20.682-6.216h.099c26.557 0 62.794 19.083 92.352 48.64 21.589 21.594 37.626 45.929 45.157 68.522 6.654 19.964 5.657 36.226-2.737 44.617z\" />\n      <circle cx=\"256.02\" cy=\"138.02\" r=\"10\" />\n    </g>\n  </svg>\n);\n","import React from 'react';\n\nexport const Bees: React.FC = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n    <title>Bees filter</title>\n    <path\n      style={{ fill: '#333e40' }}\n      d=\"M10.287 296.922c-4.184.803-4.184 6.792 0 7.594l61.58 19.324v-46.252l-61.58 19.334z\"\n    />\n    <ellipse\n      transform=\"rotate(106.888 262.41 107.048)\"\n      style={{ fill: '#d9d9d9' }}\n      cx=\"262.413\"\n      cy=\"107.047\"\n      rx=\"63.019\"\n      ry=\"58.333\"\n    />\n    <ellipse\n      transform=\"rotate(-106.888 150.227 124.248)\"\n      style={{ fill: '#f0f0f0' }}\n      cx=\"150.228\"\n      cy=\"124.251\"\n      rx=\"71.998\"\n      ry=\"66.645\"\n    />\n    <path\n      style={{ fill: '#ffce1c' }}\n      d=\"M200.556 338.209v-90.316l39.623-77.497-8.589-31.292c-28.833 5.395-55.464 14.858-78.691 27.486l-40.922 28.655-23.297 73.042v69.34l28.551 65.844 35.666 31.38c23.227 12.628 49.858 22.091 78.691 27.486l14.416-34.393-45.448-89.735z\"\n    />\n    <path\n      style={{ fill: '#faa330' }}\n      d=\"M243.365 434.24a295.86 295.86 0 0 1-11.777-1.947c-28.833-5.395-55.464-14.858-78.691-27.486-20.34-11.065-38.066-24.57-52.396-39.918l16.73 38.58 35.666 31.38c1.452.789 2.916 1.566 4.394 2.33a248.671 248.671 0 0 0 13.645 6.533c12.548 5.548 26.011 10.242 39.458 13.827a287.449 287.449 0 0 0 21.193 4.795l11.778-28.094z\"\n    />\n    <path\n      style={{ fill: '#3b484a' }}\n      d=\"M111.047 300.715c0 49.989 15.501 96.281 41.852 134.135-55.866-30.389-92.081-79.152-92.081-134.135 0-54.972 36.216-103.745 92.081-134.125-26.351 37.854-41.852 84.146-41.852 134.125zM481.303 377.929c-24.231 36.899-65.771 65.67-118.101 79.856-23.187 6.289-48.492 9.715-75.345 9.715-19.419 0-38.275-1.789-56.268-5.163-39.772-41.752-64.284-98.763-64.284-161.62 0-62.848 24.512-119.86 64.284-161.61 17.992-3.376 36.849-5.163 56.268-5.163 61.2 0 114.344 17.781 152.72 46.704 11.312 8.529 21.348 18.012 29.917 28.3l10.809 168.981z\"\n    />\n    <path\n      style={{ fill: '#333e40' }}\n      d=\"M363.202 427.742c-23.187 6.289-48.492 9.715-75.345 9.715-19.419 0-38.275-1.789-56.268-5.163a285.847 285.847 0 0 1-28.668-6.912 232.21 232.21 0 0 0 28.668 36.954c2.249.422 4.511.819 6.788 1.191 41.329 6.755 84.345 5.237 124.826-5.742 42.58-11.548 83.474-34.455 110.835-69.698a158.233 158.233 0 0 0 7.266-10.158l-1.755-27.445c-24.455 35.649-65.253 63.409-116.347 77.258z\"\n    />\n    <path\n      style={{ fill: '#ffce1c' }}\n      d=\"M504.846 300.716c.213 27.376-8.505 54.44-23.543 77.214-58.508 88.606-196.812 83.161-245.525-16.315-9.242-18.867-14.225-39.41-14.225-60.899 0-29.807 9.593-57.794 26.833-82.015 33.543-47.146 101.515-54.098 142.905-13.672.653.643 1.306 1.286 1.949 1.949.653-.663 1.306-1.306 1.949-1.949.13-.13.261-.251.392-.382 21.388-20.634 55.886-18.525 74.913 4.3 21.476 25.76 34.089 57.956 34.352 91.769z\"\n    />\n    <path\n      style={{ fill: '#faa330' }}\n      d=\"M504.77 297.258a138.746 138.746 0 0 0-.782-10.838c-2.527 21.89-10.541 43.078-22.685 61.467-24.231 36.899-65.771 65.671-118.101 79.856-12.392 3.361-25.395 5.895-38.911 7.535 56.467 15.593 121.465-3.517 157.011-57.349 13.669-20.702 22.078-44.975 23.368-69.795.186-3.56.217-7.219.1-10.876z\"\n    />\n    <path\n      style={{ fill: '#333e40' }}\n      d=\"M61.731 285.694c-.172 1.417-.316 2.84-.44 4.268-.043.496-.076.993-.113 1.49-1.118 14.917.483 29.965 4.665 44.325 8.368 28.73 26.616 53.633 49.1 73.026 11.252 9.704 23.99 18.45 37.956 26.047a232.752 232.752 0 0 1-24.71-45.625c-37.05-26.933-61.552-63.156-66.458-103.531z\"\n    />\n    <circle style={{ fill: '#ffce1c' }} cx=\"387.325\" cy=\"78.802\" r=\"17.687\" />\n    <path\n      style={{ fill: '#faa330' }}\n      d=\"M404.275 73.817c-1.944 6.534-7.588 11.633-14.786 12.522-8.723 1.077-16.727-4.403-19.118-12.573a17.63 17.63 0 0 0-.603 7.198c1.197 9.695 10.025 16.584 19.72 15.389 9.695-1.197 16.584-10.025 15.389-19.721a17.74 17.74 0 0 0-.602-2.815z\"\n    />\n    <circle style={{ fill: '#ffce1c' }} cx=\"448.871\" cy=\"91.399\" r=\"17.687\" />\n    <path\n      style={{ fill: '#faa330' }}\n      d=\"M465.819 86.421c-1.944 6.534-7.588 11.633-14.786 12.522-8.723 1.077-16.727-4.403-19.118-12.573a17.63 17.63 0 0 0-.603 7.198c1.197 9.695 10.025 16.584 19.72 15.389 9.695-1.197 16.584-10.025 15.389-19.721a17.701 17.701 0 0 0-.602-2.815z\"\n    />\n    <path d=\"M322.876 290.245a7.511 7.511 0 0 0-7.511 7.511v12.818a7.511 7.511 0 0 0 15.022 0v-12.818a7.51 7.51 0 0 0-7.511-7.511zM464.529 290.245a7.511 7.511 0 0 0-7.511 7.511v12.818a7.511 7.511 0 0 0 15.022 0v-12.818a7.51 7.51 0 0 0-7.511-7.511zM416.127 304.026a7.51 7.51 0 0 0-10.598.712c-2.87 3.284-7.18 5.166-11.827 5.166s-8.956-1.883-11.826-5.166a7.51 7.51 0 0 0-11.31 9.886c5.722 6.547 14.155 10.301 23.136 10.301s17.413-3.755 23.137-10.301a7.511 7.511 0 0 0-.712-10.598z\" />\n    <path d=\"M476.618 204.753a178.6 178.6 0 0 0-31.16-30.079 207.978 207.978 0 0 0-15.843-10.814c1.318-12.007 4.657-30.496 13.111-48.095 2.075.555 4.244.864 6.479.864 14.917 0 26.861-13.472 25.031-28.286-1.556-12.607-12.297-22.114-24.986-22.114-14.913 0-26.856 13.489-25.03 28.286.617 5.006 2.7 9.507 5.76 13.134-8.502 17.094-12.555 34.937-14.481 48.198-14.126-7.36-29.344-13.41-45.385-18.067 1.944-10.102 5.295-22.562 11.074-34.619 2.073.554 4.241.863 6.474.863 7.727 0 15.133-3.607 19.887-9.699 4.141-5.306 5.966-11.908 5.142-18.587-1.555-12.607-12.296-22.114-24.985-22.114-14.918 0-26.86 13.471-25.031 28.286.618 5.01 2.704 9.514 5.769 13.143-6.729 13.554-10.642 27.557-12.896 38.935a288.163 288.163 0 0 0-30.577-5.34c.276-.808.551-1.617.797-2.431 5.441-17.922 4.078-36.767-3.835-53.064-8.009-16.493-21.746-28.407-38.679-33.547-30.444-9.241-62.542 6.671-77.417 33.934-14.519-17.501-35.658-28.342-58.098-28.342a69.634 69.634 0 0 0-20.243 3.009c-39.123 11.876-60.593 55.666-47.859 97.616 5.252 17.302 15.545 32.018 29.419 42.375-11.193 9.831-20.945 20.558-28.934 31.946-11.932 17.01-19.982 35.541-23.834 54.605L8.711 289.684C3.555 290.913 0 295.388 0 300.745c0 5.358 3.556 9.833 8.712 11.061l47.574 14.929c3.85 19.066 11.902 37.598 23.834 54.608 16.545 23.586 40.595 44.378 69.552 60.131 24.438 13.287 51.654 22.797 80.893 28.269 18.719 3.511 38.117 5.292 57.653 5.292 26.893 0 52.904-3.357 77.311-9.976 53.237-14.43 96.679-43.863 122.343-82.879l.071-.104c36.773-55.708 30.127-126.18-11.325-177.323zM441.204 85.168a10.106 10.106 0 0 1 6.778-3.839 10.4 10.4 0 0 1 1.268-.078c5.117 0 9.45 3.84 10.078 8.933.687 5.57-3.285 10.659-8.854 11.347-.422.052-.849.078-1.269.078-5.117 0-9.449-3.839-10.077-8.933-.333-2.7.405-5.365 2.076-7.508zm-54.767-16.441c5.5-.72 10.67 3.369 11.346 8.849.739 5.992-4.092 11.425-10.122 11.425-5.117 0-9.449-3.84-10.078-8.933-.683-5.524 3.473-10.636 8.854-11.341zm88.924 305.066c-24.78 37.185-67.217 59.259-111.799 59.259-51.061 0-98.187-28.787-120.679-74.717-21.469-43.844-16.169-95.704 11.983-135.256 30.198-42.429 93.979-49.612 131.519-12.672 2.124 2.09 4.003 4.092 7.215 4.105 3.211.012 5.419-2.374 7.556-4.436 8.672-8.367 20.591-12.737 32.614-12.058a43.907 43.907 0 0 1 31.317 15.763c20.786 24.936 32.366 55.84 32.609 87.019.201 25.916-8.009 51.497-22.335 72.993zM215.594 88.166c8.283-21.471 28.297-36.213 49.674-36.213 4.609 0 9.192.682 13.621 2.026 12.883 3.91 23.37 13.05 29.531 25.735 6.256 12.882 7.312 27.847 2.974 42.139a59.698 59.698 0 0 1-1.898 5.325c-.868-.059-8.937-.474-12.105-.578a318.872 318.872 0 0 0-31.316.624c-4.899.34-14.911 1.393-15.032 1.408 4.434-13.24 12.546-31.997 25.769-44.929a7.511 7.511 0 0 0-10.503-10.739c-8.024 7.848-22.476 25.607-31.753 58.069a308.252 308.252 0 0 0-9.532 1.807c.432-6.419.085-12.914-.962-19.258a85.32 85.32 0 0 0-8.468-25.416zm-94.468 90.183c-12.878-8.488-22.423-21.421-27.118-36.889-10.328-34.025 6.651-69.411 37.848-78.88 27.465-8.337 56.083 6.681 69.566 30.989 7.128 12.852 10.101 28.049 8.178 42.633l-.033.266a278.707 278.707 0 0 0-29.585 9.564c-5.542-17.218-16.087-42.267-34.189-59.973a7.511 7.511 0 0 0-10.503 10.739c16.33 15.971 25.864 39.379 30.79 55.069-9.025 4.096-17.809 8.691-26.279 13.839-3.709 2.255-18.361 12.85-18.675 12.643zm-67.112 131.93-30.383-9.534 30.383-9.538c-.078 1.072-.124 2.144-.175 3.217a131.06 131.06 0 0 0 .175 15.855zm38.454 62.402c-11.057-15.725-19.034-33.463-22.209-52.745-.01-.079-.01-.158-.023-.237a117.247 117.247 0 0 1 0-37.915c.013-.081.013-.161.024-.241 4.747-35.614 29.046-66.929 56.549-88.602.836-.659 3.427-2.64 3.536-2.722-.058.115-1.936 3.872-2.787 5.649-15.551 32.45-23.659 68.707-23.659 104.873 0 38.155 8.921 76.196 26.281 110.194.059.115.112.232.171.346-14.395-10.833-27.497-23.828-37.883-38.6zm65.961 56.447a219.96 219.96 0 0 1-2.044-3.03 225.76 225.76 0 0 1-16.633-29.826c-13.801-29.871-20.833-62.641-20.833-95.531 0-41.831 11.606-83.494 33.518-119.152 1.322-2.15 5.741-8.857 5.985-9.214l.521-.277c16.247-8.627 33.506-15.331 51.23-20.227.367-.101.735-.198 1.102-.297a240.511 240.511 0 0 0-10.747 14.874c-26.31 39.458-40.373 86.901-40.373 134.295 0 50.076 15.599 99.789 44.699 140.584.722 1.011 5.34 7.214 6.439 8.617-18.781-5.105-36.485-12.072-52.864-20.816zm203.167 21.433c-23.125 6.272-47.814 9.452-73.379 9.452-17.769 0-35.406-1.544-52.466-4.592-16.741-17.947-30.539-38.639-40.611-61.023-13.965-31.029-20.692-65.117-19.901-99.119.908-39.021 12.017-77.933 32.058-111.444 8.097-13.539 17.676-26.207 28.432-37.744.768-.137 1.536-.273 2.306-.405a298.131 298.131 0 0 1 75.036-3.171c44.837 3.776 85.948 17.766 118.186 40.407-13.898 0-27.11 4.841-37.617 13.709-18.449-16.508-42.101-25.549-67.089-25.549-33.267 0-64.641 16.182-83.925 43.285-18.465 25.942-28.225 55.809-28.225 86.371 0 22.226 5.219 44.255 14.99 64.202 24.998 51.031 77.432 83.132 134.169 83.132 1.434 0 6.584-.138 7.131-.164a243.184 243.184 0 0 1-9.095 2.653z\" />\n  </svg>\n);\n","import React from 'react';\n\nexport const Liberty: React.FC = () => (\n  <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 511.997 511.997\">\n    <title>Liberty filter</title>\n    <path\n      d=\"M128.295 59.002c-4.114-21.359-20.011-38.654-38.54-49.437a15.304 15.304 0 0 0-15.364 0c-18.528 10.783-34.425 28.079-38.54 49.437-5.398 28.021 9.242 55.095 24.892 77.213h42.66c15.65-22.118 30.29-49.192 24.892-77.213z\"\n      fill=\"#ffce6e\"\n    />\n    <g fill=\"#ffac55\">\n      <path d=\"M55.852 59.002c3.942-20.462 18.699-37.19 36.222-48.04a98.214 98.214 0 0 0-2.318-1.397 15.304 15.304 0 0 0-15.364 0c-18.529 10.783-34.426 28.079-38.54 49.437-5.398 28.021 9.242 55.095 24.892 77.213h20c-15.651-22.118-30.29-49.192-24.892-77.213z\" />\n      <path d=\"M76.429 138.157c-10.389-17.258-14.214-30.989-11.982-42.582 1.711-8.88 8.123-17.909 17.625-25.135 9.502 7.227 15.915 16.256 17.626 25.135 2.233 11.593-1.593 25.325-11.982 42.582H76.429z\" />\n    </g>\n    <path\n      d=\"M137.609 114.281H26.538a8.534 8.534 0 0 0-8.534 8.534v15.152a8.534 8.534 0 0 0 8.534 8.534h111.071a8.534 8.534 0 0 0 8.534-8.534v-15.152a8.534 8.534 0 0 0-8.534-8.534z\"\n      fill=\"#2fc8b4\"\n    />\n    <path\n      d=\"M48.005 137.967v-15.152a8.534 8.534 0 0 1 8.534-8.534h-30a8.534 8.534 0 0 0-8.534 8.534v15.152a8.534 8.534 0 0 0 8.534 8.534h30a8.534 8.534 0 0 1-8.534-8.534z\"\n      fill=\"#00ae95\"\n    />\n    <path d=\"M51.657 167.418h60.833v161.98H51.657z\" fill=\"#35e0ca\" />\n    <path\n      d=\"M412.14 410.957c71.524 0 81.854 93.54 81.854 93.54H93.967c-35.472-35.472-31.234-106.604-31.234-106.604l35.293-34.512 49.063 5.43 27.529-14.281 103.667 48.892 133.855 7.535z\"\n      fill=\"#2fc8b4\"\n    />\n    <path\n      d=\"m92.774 371.041 7.571-7.403-2.318-.257-35.293 34.512s-4.238 71.132 31.234 106.604h37.907c-44.407-44.406-39.101-133.456-39.101-133.456z\"\n      fill=\"#00ae95\"\n    />\n    <path\n      d=\"M302.641 52.403c-2.31-5.506-10.137-5.506-12.448 0-5.883 14.022-13.814 44.248-13.814 105.307h40.076c.001-61.059-7.931-91.285-13.814-105.307zm99.399 40.885c-.069-5.971-7.321-8.916-11.533-4.684-10.726 10.778-29.448 35.799-52.422 92.37l37.131 15.079c22.975-56.571 26.999-87.561 26.824-102.765zm81.306 85.104c3.515-4.827-.537-11.524-6.444-10.65-15.042 2.225-45.009 11.087-97.249 42.696l20.747 34.288c52.24-31.608 73.995-54.041 82.946-66.334zM190.795 93.288c.069-5.971 7.321-8.916 11.533-4.684 10.726 10.778 29.448 35.799 52.422 92.37l-37.131 15.079c-22.975-56.571-26.999-87.561-26.824-102.765zm-81.306 85.104c-3.515-4.827.537-11.524 6.444-10.65 15.042 2.225 45.009 11.087 97.249 42.696l-20.747 34.288c-52.24-31.608-73.995-54.041-82.946-66.334zm19.771 107.187L44.904 314.66c-11.03 3.803-16.889 15.826-13.086 26.856s15.826 16.889 26.856 13.086l39.352 8.778 35.293-34.512 9.711-3.348c11.03-3.803 16.889-15.826 13.086-26.856-3.802-11.028-15.826-16.887-26.856-13.085z\"\n      fill=\"#2fc8b4\"\n    />\n    <path\n      d=\"M133.319 328.869 48.963 357.95c-11.03 3.803-16.889 15.826-13.086 26.856 3.802 11.03 15.826 16.889 26.856 13.086l84.356-29.081c11.03-3.803 16.889-15.826 13.086-26.856-3.802-11.029-15.826-16.888-26.856-13.086z\"\n      fill=\"#00ae95\"\n    />\n    <path\n      d=\"m460.941 311.813-108.398-80.715-56.126-22.566-50.563 22.566-113.96 80.715-.01-.01c5.157 79.759 76.857 142.974 164.534 142.974s159.377-63.215 164.534-142.974l-.011.01z\"\n      fill=\"#35e0ca\"\n    />\n    <g fill=\"#00ae95\">\n      <path d=\"M400.4 244.727c27.18-16.445 46.093-30.401 59.258-41.743a185.47 185.47 0 0 0-19.941-23.877c-15.538 6.477-35.293 16.344-60.064 31.332l20.747 34.288zm-38.995-114.004c-7.083 13.098-14.915 29.556-23.32 50.251l37.131 15.08c8.273-20.373 14.079-37.412 18.127-51.606a199.068 199.068 0 0 0-31.938-13.725zm-83.946-9.49c-.681 10.731-1.08 22.828-1.08 36.477h40.076c0-13.648-.398-25.746-1.08-36.477a211.735 211.735 0 0 0-37.916 0zm-59.841 74.821 37.131-15.08c-8.405-20.696-16.237-37.154-23.32-50.252a199.197 199.197 0 0 0-31.938 13.725c4.048 14.195 9.854 31.234 18.127 51.607zm-4.436 14.385c-24.771-14.988-44.526-24.855-60.064-31.333a185.456 185.456 0 0 0-19.941 23.877c13.166 11.342 32.079 25.298 59.259 41.744l20.746-34.288z\" />\n      <path d=\"M460.941 311.813s-104.646-22.117-164.524-86.595c-59.877 64.479-164.524 86.595-164.524 86.595l14.856-47.156 70.789-73.119 78.879-21.877 80.396 21.877 54.103 49.199 22.248 31.504 7.777 39.572z\" />\n    </g>\n    <path\n      d=\"M461.255 302.58c0 3.095-.101 6.169-.303 9.223l-.01.01s-63.397-120.271-164.524-120.271-164.524 120.271-164.524 120.271l-.01-.01a139.702 139.702 0 0 1-.303-9.223c0-84.057 73.803-152.196 164.837-152.196s164.837 68.139 164.837 152.196z\"\n      fill=\"#35e0ca\"\n    />\n    <path\n      d=\"m51.657 221.398 17.287 48.544a9.677 9.677 0 0 0 9.115 6.43h8.029a9.677 9.677 0 0 0 9.115-6.43l17.287-48.544H51.657z\"\n      fill=\"#2fc8b4\"\n    />\n    <path\n      d=\"M82.074 137.937c-26.111 0-47.278 21.167-47.278 47.277 0 26.111 21.167 47.277 47.277 47.277s47.277-21.167 47.277-47.277c.001-26.11-21.166-47.277-47.276-47.277z\"\n      fill=\"#35e0ca\"\n    />\n    <path d=\"M207.115 344.556a7.5 7.5 0 0 0 7.5-7.5v-17.364c0-4.142-3.357-7.5-7.5-7.5s-7.5 3.358-7.5 7.5v17.364a7.5 7.5 0 0 0 7.5 7.5zm11.824 10.522H195.29c-4.143 0-7.5 3.358-7.5 7.5s3.357 7.5 7.5 7.5h23.649c4.143 0 7.5-3.358 7.5-7.5s-3.357-7.5-7.5-7.5zm166.781-10.522a7.5 7.5 0 0 0 7.5-7.5v-17.364c0-4.142-3.357-7.5-7.5-7.5s-7.5 3.358-7.5 7.5v17.364a7.5 7.5 0 0 0 7.5 7.5zm11.825 10.522h-23.65c-4.143 0-7.5 3.358-7.5 7.5s3.357 7.5 7.5 7.5h23.65a7.5 7.5 0 0 0 0-15zm-80.22-6.195a7.498 7.498 0 0 0-10.582.711c-2.502 2.861-6.266 4.502-10.326 4.502s-7.824-1.641-10.326-4.502a7.498 7.498 0 0 0-10.582-.711 7.5 7.5 0 0 0-.711 10.583c5.35 6.121 13.229 9.631 21.619 9.631s16.27-3.51 21.619-9.631a7.5 7.5 0 0 0-.711-10.583z\" />\n    <path d=\"M28.787 387.25c3.894 11.293 14.391 18.942 26.272 19.27.105 21.032 3.573 73.248 33.604 103.28a7.5 7.5 0 0 0 5.304 2.197h400.025a7.502 7.502 0 0 0 7.455-8.323c-.111-1.008-2.865-24.974-14.833-49.262-13.542-27.485-33.432-44.275-58.097-49.326 22.975-25.365 37.634-57.474 39.918-92.8v-.006c.212-3.203.319-6.467.319-9.7 0-28.795-8.27-55.833-22.721-79.187 24.646-18.281 37.156-32.048 43.375-40.586a14.167 14.167 0 0 0 1.181-14.83c-2.452-4.818-7.298-7.812-12.647-7.812-.709 0-1.429.053-2.139.158-11.657 1.724-32.112 7.257-64.167 23.606a172.375 172.375 0 0 0-18.682-13.575c13.908-39.903 16.737-63.9 16.585-77.153-.091-7.902-6.375-14.092-14.307-14.092-3.777 0-7.344 1.493-10.043 4.204-9.237 9.283-23.747 28.162-41.365 65.717a182.576 182.576 0 0 0-19.996-4.118c-1.013-52.944-8.248-81.052-14.272-95.411a14.214 14.214 0 0 0-13.14-8.728 14.215 14.215 0 0 0-13.141 8.728c-6.024 14.359-13.258 42.471-14.272 95.411a182.576 182.576 0 0 0-19.996 4.118c-17.619-37.559-32.129-56.437-41.365-65.716-2.698-2.711-6.265-4.204-10.043-4.204-7.931 0-14.214 6.189-14.306 14.092-.152 13.255 2.678 37.255 16.585 77.152a172.355 172.355 0 0 0-18.681 13.574c-18.336-9.356-34.683-16.113-48.717-20.141a54.709 54.709 0 0 0-5.433-9.787h10.559c8.841 0 16.034-7.193 16.034-16.034v-15.152c0-8.841-7.193-16.033-16.034-16.033h-8.595c7.443-17.529 9.627-33.717 6.646-49.197-4.133-21.459-19.489-41.324-42.132-54.501a22.817 22.817 0 0 0-22.908 0c-6.521 3.795-12.548 8.227-17.912 13.173a7.501 7.501 0 0 0 10.168 11.028c4.564-4.208 9.708-7.989 15.289-11.236a7.787 7.787 0 0 1 7.818 0c18.896 10.998 31.634 27.171 34.948 44.374 2.713 14.088-.032 29.29-8.393 46.36h-4.969c.434-4.388.275-8.572-.505-12.626-2.059-10.679-9.321-21.222-20.45-29.686a7.5 7.5 0 0 0-9.08 0c-11.13 8.464-18.393 19.007-20.449 29.687-.781 4.053-.94 8.237-.506 12.625h-4.969c-8.361-17.071-11.106-32.273-8.393-46.361.758-3.933 2.012-7.853 3.729-11.651a7.5 7.5 0 0 0-13.668-6.179c-2.199 4.866-3.811 9.91-4.789 14.993-2.982 15.479-.798 31.668 6.646 49.198h-8.595c-8.841 0-16.033 7.192-16.033 16.033v15.152c0 8.841 7.192 16.034 16.033 16.034h10.559c-6.17 8.863-9.801 19.62-9.801 31.213 0 15.498 6.48 29.503 16.861 39.477v82.294l-1.697.585c-14.921 5.144-22.876 21.468-17.732 36.391a28.599 28.599 0 0 0 10.55 14.047 28.676 28.676 0 0 0-5.161 7.375c-3.349 6.873-3.821 14.639-1.329 21.867zM394.54 95.214c-.145 12.109-3.042 33.137-14.823 67.539a178.408 178.408 0 0 0-21.419-9.255c15.448-32.591 27.956-49.558 36.242-58.284zm-160.003 58.284a178.338 178.338 0 0 0-21.419 9.255c-11.78-34.399-14.679-55.428-14.824-67.539 8.285 8.724 20.793 25.69 36.243 58.284zM42.969 382.361c-2.449-7.102 1.337-14.872 8.439-17.321l77.055-26.565a150.2 150.2 0 0 0 8.627 25.043c.104.233.202.467.307.699L60.289 390.8c-7.024 2.423-14.9-1.417-17.32-8.439zm430.025 78.344c6.839 13.769 10.418 27.738 12.143 36.291H97.176c-25.464-27.962-27.206-77.885-27.08-93.709l74.213-25.584c.358.623.74 1.232 1.107 1.85 14.139 23.8 34.532 43.596 58.313 57.681 29.245 17.321 63.444 25.815 97.373 24.98 42.677-1.052 82.83-16.451 113.842-43.703 25.104.974 44.622 15.157 58.05 42.194zm-165.301-13.798-.049.003c-72.532 4.32-146.992-39.582-164.778-112.72-.197-.811-3.735-16.359-2.92-16.561l.582-.146c30.329-7.582 59.874-18.773 87.631-33.129 13.17-6.812 25.938-14.447 38.029-23.036 2.647-1.883 31.009-24.531 30.23-25.308 25.612 25.515 57.166 44.317 90.11 58.773 21.106 9.261 43.276 17.05 65.78 22.7l.601.151c-7.83 69.764-69.47 124.311-145.216 129.273zM449.75 280.232c-3.277-4.584-6.688-9.062-10.175-13.488a310.594 310.594 0 0 0-19.382-22.155 7.499 7.499 0 0 0-10.604-.187 7.5 7.5 0 0 0-.187 10.605c8.993 9.316 17.328 19.302 25.027 29.71 3.53 4.772 10.425 14.981 10.547 15.168-21.47-6.239-59.393-19.218-95.037-41.222l-.125-.077c-17.466-10.764-33.911-23.415-47.901-38.473a7.503 7.503 0 0 0-10.992 0c-12.025 12.952-25.912 24.11-40.643 33.833l-.39.26c-31.156 20.499-65.938 35.162-101.667 45.573.283-.082 3.111-5.133 3.811-6.128 9.136-13.001 18.948-25.555 29.899-37.084 45.174-47.546 87.192-57.526 114.486-57.526 31.387 0 62.384 12.339 92.129 36.675a7.498 7.498 0 0 0 10.554-1.056c2.586-3.163 2.106-7.967-1.056-10.554-32.495-26.585-66.688-40.065-101.627-40.065-43.459 0-86.9 21.604-125.629 62.477-11.074 11.687-21.187 24.27-30.369 37.492l-.061.088c9.096-65.359 65.793-117.213 137.002-125.155 12.635-1.403 25.476-1.436 38.11 0 71.212 7.941 127.912 59.801 137.009 125.161-.157-.226-1.974-2.808-2.729-3.872zm26.434-104.786c-5.908 7.719-17.212 19.633-38.588 35.532a163.601 163.601 0 0 0-14.071-16.238c25.73-12.693 42.532-17.551 52.659-19.294zm-192.145-32.151c1.11-49.41 7.87-74.731 12.379-86.281 4.509 11.55 11.268 36.871 12.378 86.281-.118-.008-3.782-.211-5.505-.274-4.578-.17-9.163-.191-13.74 0-1.838.067-3.678.152-5.512.274zm-147.363 37.54c9.801 3.374 20.714 8.023 32.634 13.904a163.572 163.572 0 0 0-14.071 16.237c-7.17-5.335-13.646-10.551-19.346-15.58.029-.151.048-.302.075-.453.418-2.327.702-4.703.815-7.065.112-2.347.08-4.7-.107-7.043zM71.812 96.993c1.069-5.547 4.724-11.448 10.261-16.725 5.536 5.277 9.192 11.179 10.261 16.724.585 3.039.635 6.274.144 9.789H71.67c-.492-3.515-.443-6.749.142-9.788zm-46.307 40.973v-15.152c0-.57.464-1.033 1.033-1.033h111.07c.57 0 1.034.463 1.034 1.033v15.152c0 .57-.464 1.034-1.034 1.034h-26.137a54.453 54.453 0 0 0-13.169-6.109c-10.474-3.267-21.973-3.253-32.449-.003l-.1.031A54.443 54.443 0 0 0 52.675 139H26.538a1.035 1.035 0 0 1-1.033-1.034zm16.791 47.247c0-21.571 18.207-39.777 39.777-39.777 21.572 0 39.777 18.198 39.777 39.777 0 21.554-18.231 39.777-39.777 39.777-21.667.001-39.777-18.142-39.777-39.777zm16.861 79.602 2.722 7.643c2.432 6.827 8.934 11.413 16.18 11.413h8.029c7.246 0 13.749-4.586 16.181-11.414l2.722-7.643v21.198l-45.833 15.801v-36.998h-.001zm25.423-24.883a54.822 54.822 0 0 0 12.545-2.062 55.088 55.088 0 0 0 1.721-.517l-10.709 30.071a2.18 2.18 0 0 1-2.05 1.446h-8.029a2.18 2.18 0 0 1-2.049-1.446l-10.708-30.071c.573.185 1.152.354 1.733.521a54.715 54.715 0 0 0 17.546 2.058zm35.41-15.242a55.053 55.053 0 0 0 10.594-14.08c4.959 4.176 10.377 8.445 16.219 12.778-10.392 16.794-17.584 35.494-20.807 55.383l-6.007 2.071.001-56.152zm-72.641 97.06 76.916-26.517a147.474 147.474 0 0 0-.185 7.345c0 7.025.503 14.072 1.491 21.027L56.23 347.51c-7.024 2.422-14.9-1.419-17.32-8.44-2.449-7.101 1.337-14.871 8.439-17.32z\" />\n  </svg>\n);\n","import React from 'react';\n\nexport const Halloween: React.FC = () => (\n  <svg\n    height=\"512\"\n    viewBox=\"0 0 128 128\"\n    width=\"512\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n    data-name=\"Layer 1\"\n  >\n    <title>Halloween filter</title>\n    <path\n      d=\"M57.562 34.188c3.125-18.25-2.562-20.375-7.125-21.5l3.663-6.5c9.9.313 20.983 16.9 23.4 31.021\"\n      fill=\"#72bd39\"\n    />\n    <path\n      d=\"M121.5 71.5c0 22.74-10.01 36.44-20.62 39.33a16.172 16.172 0 0 1-4.66.57l-.04.04a17.8 17.8 0 0 1-8.31 4.81 13.08 13.08 0 0 1-4.43.25 1.774 1.774 0 0 1-.34.24c0 .01-.01.02-.03.03-5.67 4.18-13.09 4.73-19.07 4.73-6.11 0-13.73-.57-19.44-5-4.88.55-9.22-1.63-12.78-5.1-12.11.35-25.28-13.84-25.28-39.9 0-26.34 20.46-35.05 25.06-32.38C39.19 29.7 48.93 27.1 53.8 35.5A15.353 15.353 0 0 1 64 32.12a15.824 15.824 0 0 1 9.38 2.73c.28.2.55.42.82.65a11.779 11.779 0 0 1 2.05-2.65c5.23-4.99 13.52-1.97 20.19 6.27a5.94 5.94 0 0 1 3.91-.28h.01c7.52 1.41 21.14 11.17 21.14 32.66z\"\n      fill=\"#fba430\"\n    />\n    <path\n      d=\"M82.458 57.656 89.297 69.5H75.62zM45.542 57.656 38.703 69.5H52.38zM68.618 78.165a1.747 1.747 0 0 1-1.384-.677L64 73.323l-3.234 4.165A1.75 1.75 0 0 1 58 75.342l4.618-5.942a1.813 1.813 0 0 1 2.765 0L70 75.342a1.75 1.75 0 0 1-1.381 2.823zM91.87 78.79C89.89 84.43 84.5 97.12 69 99.4v-3.84H59v3.84c-15.5-2.28-20.89-14.97-22.88-20.61 1.27.47 6.26 2.19 12.17 3.64v6.15h10v-4.26a37.928 37.928 0 0 0 5.71.3 37.928 37.928 0 0 0 5.71-.3v4.26h10v-6.15a125.525 125.525 0 0 0 12.16-3.64z\"\n      fill=\"#da8a29\"\n    />\n    <g fill=\"#26180d\">\n      <path d=\"M82.458 55.905a1.751 1.751 0 0 0-1.516.875L74.1 68.625a1.75 1.75 0 0 0 1.52 2.625H89.3a1.75 1.75 0 0 0 1.516-2.625L83.974 56.78a1.751 1.751 0 0 0-1.516-.875zM78.651 67.75l3.807-6.595 3.807 6.595zM45.542 55.905a1.751 1.751 0 0 0-1.516.875l-6.839 11.845A1.75 1.75 0 0 0 38.7 71.25h13.68a1.75 1.75 0 0 0 1.52-2.625L47.057 56.78a1.751 1.751 0 0 0-1.515-.875zM41.734 67.75l3.807-6.595 3.807 6.595zM62.618 69.4 58 75.342a1.75 1.75 0 0 0 2.765 2.146L64 73.323l3.234 4.165A1.75 1.75 0 0 0 70 75.342L65.382 69.4a1.813 1.813 0 0 0-2.764 0z\" />\n      <path d=\"M69.255 101.132c8-1.177 18.7-5.907 24.267-21.762a1.75 1.75 0 0 0-2.263-2.22 124.005 124.005 0 0 1-11.966 3.58 1.749 1.749 0 0 0-1.333 1.7v4.4h-6.5v-2.51a1.753 1.753 0 0 0-.589-1.31 1.735 1.735 0 0 0-1.37-.428 35.628 35.628 0 0 1-5.442.288h-.118a35.753 35.753 0 0 1-5.442-.288 1.749 1.749 0 0 0-1.959 1.738v2.51h-6.5v-4.4a1.749 1.749 0 0 0-1.333-1.7 123.452 123.452 0 0 1-11.98-3.582 1.75 1.75 0 0 0-2.257 2.224c4.491 12.729 12.659 20.051 24.275 21.76a1.75 1.75 0 0 0 2-1.731v-2.09h6.5V99.4A1.75 1.75 0 0 0 69 101.15a1.726 1.726 0 0 0 .255-.018zM59 93.811a1.75 1.75 0 0 0-1.75 1.75V97.3c-8.135-1.8-14.206-7.048-18.1-15.638 1.924.615 4.487 1.386 7.386 2.131v4.787a1.75 1.75 0 0 0 1.75 1.75h10a1.75 1.75 0 0 0 1.75-1.75v-2.325a35.377 35.377 0 0 0 3.96.116 35.847 35.847 0 0 0 3.96-.116v2.325a1.75 1.75 0 0 0 1.75 1.75h10a1.75 1.75 0 0 0 1.75-1.75v-4.786a137.299 137.299 0 0 0 7.381-2.13C84.965 90.253 78.9 95.5 70.75 97.3v-1.739a1.75 1.75 0 0 0-1.75-1.75zM120.55 55.956a1.75 1.75 0 1 0-3.269 1.25A39.9 39.9 0 0 1 119.75 71.5c0 14.389-4.236 26.5-11.623 33.224a19.072 19.072 0 0 1-7.584 4.363 42.4 42.4 0 0 0 6.645-13.623 1.75 1.75 0 1 0-3.375-.928 37.476 37.476 0 0 1-8.3 15.064h-.1a1.717 1.717 0 0 0-1.9 1.856 15.118 15.118 0 0 1-5.486 2.951 24.924 24.924 0 0 0 4.566-10.221 1.75 1.75 0 0 0-3.42-.746c-2.173 9.95-8.432 15.06-19.699 16.09a1.75 1.75 0 0 0 .157 3.493c.053 0 .107 0 .161-.007 5.833-.532 10.544-2.108 14.2-4.735.333.021.669.056 1 .056 4.59 0 8.606-2.091 11.949-5.2a20.808 20.808 0 0 0 13.551-5.828C118.6 99.924 123.25 86.871 123.25 71.5a43.36 43.36 0 0 0-2.7-15.544zM114.556 51.713a1.75 1.75 0 0 0 2.968-1.855 33.074 33.074 0 0 0-1.873-2.691 1.75 1.75 0 0 0-2.77 2.141 28.943 28.943 0 0 1 1.675 2.405z\" />\n      <path d=\"M60.284 119.658c-7.784-.425-18.477-2.568-21.454-16.222a1.75 1.75 0 0 0-3.42.746 25.385 25.385 0 0 0 4.037 9.519 20.765 20.765 0 0 1-5.315-3.432 1.735 1.735 0 0 0-.406-.376 34.159 34.159 0 0 1-9.539-15.356 1.75 1.75 0 0 0-3.375.928 37.562 37.562 0 0 0 7.478 13.825 18.647 18.647 0 0 1-8.418-4.565C12.486 98 8.25 85.889 8.25 71.5c0-20.073 11.9-27.7 15.55-29.559a14.749 14.749 0 0 1 4.651-1.582c-4.845 7.035-8.019 16.936-8.975 28.1a1.749 1.749 0 0 0 1.594 1.893c.051 0 .1.007.151.007a1.75 1.75 0 0 0 1.742-1.6c.942-11.01 4.279-21.035 9.155-27.508 4.388-5.831 10.059-9.3 14.758-9.165a7.2 7.2 0 0 1 5.342 2.533 18.483 18.483 0 0 0-5.178 9.758 1.75 1.75 0 1 0 3.418.752C52.1 37.66 56.657 33.875 64 33.875s11.9 3.785 13.541 11.251a1.75 1.75 0 0 0 1.708 1.374 1.725 1.725 0 0 0 .377-.041 1.749 1.749 0 0 0 1.333-2.085 18.961 18.961 0 0 0-4.525-9.107 6.79 6.79 0 0 1 5.511-3.4c4.164-.2 9.4 3.349 13.937 9.381 4.875 6.472 8.212 16.5 9.154 27.507a1.75 1.75 0 0 0 1.742 1.6c.05 0 .1 0 .151-.007a1.749 1.749 0 0 0 1.594-1.893c-.956-11.162-4.13-21.065-8.976-28.1a18.637 18.637 0 0 1 8.5 4.058 1.75 1.75 0 0 0 2.158-2.756c-4.726-3.7-10.018-5.489-13.264-4.667-4.883-5.686-10.305-8.8-15.129-8.622a9.629 9.629 0 0 0-5.106 1.677A55.213 55.213 0 0 0 68.6 14.261a1.75 1.75 0 1 0-2.8 2.1 48.906 48.906 0 0 1 8.05 16.51l-.1.144a17.58 17.58 0 0 0-9.75-2.64 20.862 20.862 0 0 0-4.26.431c1.758-13.715-1.862-17.487-6.695-19.181l2.02-3.584a12.621 12.621 0 0 1 5.683 2.9 1.75 1.75 0 0 0 2.216-2.709C60 5.8 57.037 4.529 54.155 4.438a1.735 1.735 0 0 0-1.58.89l-3.663 6.5a1.75 1.75 0 0 0 1.105 2.559c3.934.97 8.382 2.078 6.015 17.644-.335.158-.667.321-.986.5a10.674 10.674 0 0 0-8.039-3.946c-5.276-.21-11.1 2.913-15.943 8.424-2.211-.562-5.411.058-8.854 1.813C18.115 40.91 4.75 49.438 4.75 71.5c0 15.371 4.653 28.424 12.766 35.812a20.724 20.724 0 0 0 13.831 5.843c.25 0 .5-.024.749-.035a20.508 20.508 0 0 0 10.704 5.118 1.685 1.685 0 0 0 .956-.168c4.067 3.022 9.488 4.709 16.336 5.082h.1a1.75 1.75 0 0 0 .094-3.5z\" />\n    </g>\n  </svg>\n);\n","import React from 'react';\nimport { Deform } from './icons/Deform.svg';\nimport { Dog } from './icons/Dog.svg';\nimport { Bees } from './icons/Bees.svg';\nimport { Liberty } from './icons/Liberty.svg';\nimport { Halloween } from './icons/Halloween.svg';\n\nexport const filterButtonIcons = {\n  deform: <Deform />,\n  dog: <Dog />,\n  bees: <Bees />,\n  liberty: <Liberty />,\n  halloween: <Halloween />\n};\n\nexport type Filter = keyof typeof filterButtonIcons;\n\nexport type FilterState = {\n  initialized: boolean;\n  isLoading: boolean;\n  showButtons: boolean;\n  filters: Filter[];\n  active: Filter | null;\n};\n\nexport type CameraState = {\n  isBrowserCompatible: boolean;\n  stream: MediaStream | null;\n  capture: boolean;\n};\n\nexport type CameraMode = 'user' | 'environment';\n\nexport type Photo = {\n  month: string;\n  year: number;\n  images: string[];\n};\n","import React, { useReducer, useRef, useEffect } from 'react';\nimport { useSelector, useDispatch, RootStateOrAny } from 'react-redux';\nimport classNames from 'classnames';\nimport { Animated } from 'react-animated-css';\nimport { setFooterType } from 'AppShell/AppShellStore';\nimport Button from 'components/Button/Button';\nimport Loader from 'components/Loader/Loader';\nimport PhotoCapture from './PhotoCapture/PhotoCapture';\nimport { getDeviceWidth, playSound, onAnimationComplete } from 'utils';\nimport { GENERIC_ERROR } from 'utils/system';\nimport { Filter, FilterState, CameraState, filterButtonIcons } from './data';\nimport './Camera.scss';\n\nconst Camera: React.FC = () => {\n  const dispatch = useDispatch();\n  const { cameraMode } = useSelector(({ camera }: RootStateOrAny) => camera);\n\n  const [filter, dispatchFilter] = useReducer(\n    (prevState: FilterState, action: Partial<FilterState>) => ({\n      ...prevState,\n      ...action\n    }),\n    {\n      initialized: false,\n      isLoading: false,\n      showButtons: false,\n      filters: ['dog', 'halloween', 'deform', 'bees', 'liberty'],\n      active: null\n    }\n  );\n\n  const [camera, dispatchCamera] = useReducer(\n    (prevState: CameraState, action: Partial<CameraState>) => ({\n      ...prevState,\n      ...action\n    }),\n    {\n      isBrowserCompatible: true,\n      stream: null,\n      capture: false\n    }\n  );\n\n  const { isLoading, initialized, showButtons, filters, active } = filter;\n  const { isBrowserCompatible, capture, stream } = camera;\n\n  const videoElem = useRef<HTMLVideoElement>(null);\n  const audioElem = useRef<HTMLAudioElement>(null);\n\n  useEffect(() => {\n    startCamera();\n  }, [cameraMode]);\n\n  const startCamera = async () => {\n    try {\n      if (videoElem.current) {\n        const response = await window.navigator.mediaDevices.getUserMedia({\n          video: {\n            facingMode: cameraMode,\n            width: {\n              ideal: getDeviceWidth()\n            }\n          }\n        });\n        videoElem.current.srcObject = response;\n        dispatchCamera({ stream: response });\n      }\n    } catch (error) {\n      dispatchCamera({ isBrowserCompatible: false });\n    }\n  };\n\n  const stopCamera = () => stream?.getTracks().forEach((track) => track.stop());\n\n  const setFilter = async (newFilter: Filter) => {\n    // Set new filter's icon in the middle button\n    const newFilters = filters.filter((filter) => filter !== newFilter);\n    newFilters.splice(2, 0, newFilter);\n\n    dispatchFilter({\n      isLoading: true,\n      filters: newFilters\n    });\n\n    if (initialized) await window.JEEFACEFILTERAPI.destroy();\n\n    window.Filters[newFilter].init((errorCode: string) => {\n      if (errorCode) {\n        removeFilter();\n        dispatchFilter({ isLoading: false });\n        alert(GENERIC_ERROR);\n      } else {\n        stopCamera();\n        dispatchFilter({\n          initialized: true,\n          isLoading: false,\n          active: newFilter\n        });\n      }\n    });\n  };\n\n  const removeFilter = () => {\n    dispatchFilter({\n      initialized: false,\n      showButtons: false,\n      active: null\n    });\n    startCamera();\n    dispatch(setFooterType('full'));\n    window.JEEFACEFILTERAPI.destroy();\n  };\n\n  const showOpenMouth = !isLoading && ['dog', 'halloween'].includes(active || '');\n\n  return (\n    <main className=\"camera\">\n      {isLoading && <Loader message=\"Applying Filter\" fixed />}\n\n      {!isBrowserCompatible && (\n        <div className=\"not-supported\">\n          <p>\n            <span role=\"img\" aria-label=\"crying emoji\">\n              😭\n            </span>{' '}\n            Either your browser doesn't support the MediaDevices API used by the camera or\n            you declined camera access!\n          </p>\n        </div>\n      )}\n\n      <Animated\n        animationIn=\"tada\"\n        animationOut=\"fadeOut\"\n        animationInDuration={1000}\n        animationOutDuration={0}\n        isVisible={showOpenMouth}\n        animateOnMount={false}\n      >\n        <div className=\"open-mouth\">\n          <strong>Open Mouth</strong>\n          <span role=\"img\" aria-label=\"tongue emoji\">\n            👅\n          </span>\n        </div>\n      </Animated>\n\n      <video\n        ref={videoElem}\n        className={classNames('video-stream', {\n          hide: initialized || capture\n        })}\n        playsInline\n        autoPlay\n        muted\n      />\n\n      {videoElem.current && (\n        <PhotoCapture\n          takePic={capture}\n          closePic={() => dispatchCamera({ capture: false })}\n          videoElem={videoElem.current}\n        />\n      )}\n\n      <section className=\"controls\">\n        <Button\n          icon=\"faCircle\"\n          className=\"btn-capture\"\n          testId=\"btn-capture-main\"\n          onClick={() => {\n            if (isBrowserCompatible && audioElem.current) {\n              dispatchCamera({ capture: true });\n              playSound('cameraShutter', audioElem.current);\n            }\n          }}\n        />\n\n        {!showButtons && (\n          <Button\n            icon=\"faLaugh\"\n            className=\"btn-filters\"\n            testId=\"btn-filters\"\n            onClick={() => {\n              if (isBrowserCompatible) {\n                dispatchFilter({ showButtons: true });\n                dispatch(setFooterType('none'));\n                // Load the center filter in the button list by default\n                onAnimationComplete(() => setFilter(filters[2]), 100);\n              }\n            }}\n          />\n        )}\n\n        <Animated\n          animationIn=\"zoomIn\"\n          animationOut=\"zoomOut\"\n          animationInDuration={100}\n          animationOutDuration={100}\n          isVisible={showButtons}\n          animateOnMount={false}\n        >\n          <div className=\"filters\" data-test=\"filters\">\n            {filters.map((filter) => (\n              <Button\n                key={filter}\n                className={filter}\n                svg={filterButtonIcons[filter]}\n                onClick={() => filter !== active && setFilter(filter)}\n              />\n            ))}\n          </div>\n\n          <div className=\"filter-actions\">\n            <Button icon=\"faMagic\" round />\n            <Button icon=\"faQrcode\" round />\n            <Button icon=\"faTimesCircle\" className=\"btn-close\" onClick={removeFilter} />\n            <Button icon=\"faLaugh\" round />\n            <Button icon=\"faSearch\" round />\n          </div>\n        </Animated>\n      </section>\n\n      <audio ref={audioElem} className=\"app-sound\" />\n    </main>\n  );\n};\n\nexport default Camera;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Icon from 'components/Icon/Icon';\nimport './404.scss';\n\nconst NotFound = () => (\n  <main className=\"not-found\">\n    <div className=\"message\">\n      <h1>Well, this is awkward!</h1>\n      <p>We couldn't find what you were looking for</p>\n      <Link to=\"/\">\n        <Icon name=\"faSnapchatSquare\" />\n        <span>Go Home</span>\n      </Link>\n    </div>\n  </main>\n);\n\nexport default NotFound;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Switch, Route } from 'react-router-dom';\nimport { configureStore } from '@reduxjs/toolkit';\nimport { Provider } from 'react-redux';\n\nimport app from 'AppShell/AppShellStore';\nimport camera from 'features/Camera/CameraStore';\nimport user from 'features/User/UserStore';\nimport snapMap from 'features/SnapMap/SnapMapStore';\nimport snap from 'features/Snap/SnapStore';\nimport chat from 'features/Chat/ChatStore';\n\nimport AppShell from 'AppShell/AppShell';\nimport Camera from 'features/Camera/Camera';\nimport NotFound from 'features/404/404';\n\nimport 'normalize.css';\nimport 'animate.css';\nimport './styles/app.scss';\n\nexport const store = configureStore({\n  reducer: { app, camera, user, snapMap, snap, chat }\n});\n\nconst App = () => (\n  <React.StrictMode>\n    <Provider store={store}>\n      <BrowserRouter>\n        <AppShell>\n          <Switch>\n            <Route path=\"/\" component={Camera} exact />\n            <Route path=\"/snapchat-clone\" component={Camera} exact />\n            <Route component={NotFound} />\n          </Switch>\n        </AppShell>\n      </BrowserRouter>\n    </Provider>\n  </React.StrictMode>\n);\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}